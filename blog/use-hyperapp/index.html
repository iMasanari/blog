<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8" /><meta name="viewport" content="width=device-width" /><title>ブログをHyperappベースの自作ジェネレータに変更した話 | Tech SANDBOX</title><meta name="description" content="作ったばかりのこのブログだが、Hyperappで動くstaticでSPAなサイトに変更した。React Staticを使用していた時とは違って、HTMLの書き出しなどは自分で処理を行っている。まだ未完成な機能もあるが、ビルド後のJavaScriptが約8KBと軽量で気に入っている。" /><meta property="og:title" content="ブログをHyperappベースの自作ジェネレータに変更した話 | Tech SANDBOX" /><meta property="og:description" content="作ったばかりのこのブログだが、Hyperappで動くstaticでSPAなサイトに変更した。React Staticを使用していた時とは違って、HTMLの書き出しなどは自分で処理を行っている。まだ未完成な機能もあるが、ビルド後のJavaScriptが約8KBと軽量で気に入っている。" /><meta property="og:type" content="article" /><meta property="og:url" content="https://blog.imasanari.dev/blog/use-hyperapp/" /><meta property="og:image" content="https://blog.imasanari.dev/images/icon.jpg" /><meta property="og:site_name" content="Tech SANDBOX" /><meta name="twitter:card" content="summary" /><meta name="next-head-count" content="11" /><meta charSet="utf-8" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-74494516-4"></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-74494516-4', {
  page_path: window.location.pathname,
});
</script><meta name="google-site-verification" content="UmWq3FQLg72H6H0Tlk-SFR9f0bSBsvC8nDmxtK3-qMc" /><meta name="next-font-preconnect" /><link rel="amphtml" href="/blog/use-hyperapp.amp" /><noscript data-n-css></noscript><script defer noModule src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer></script><script src="/_next/static/chunks/framework-da30cb0cd7d038e7.js" defer></script><script src="/_next/static/chunks/main-9fc370467ffab28e.js" defer></script><script src="/_next/static/chunks/pages/_app-d26166b7d1ee9cd4.js" defer></script><script src="/_next/static/chunks/510-ac06f49b3eddcc17.js" defer></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-a8fd25f25c4a7a36.js" defer></script><script src="/_next/static/sshnfDrKevPjfNC6WQ_tP/_buildManifest.js" defer></script><script src="/_next/static/sshnfDrKevPjfNC6WQ_tP/_ssgManifest.js" defer></script><style data-emotion="c-global 15yblv4">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><style data-emotion="c 1kyvigp 1ghlunn i9gxme 1x6wkub 1tqdl5x wb6uyc rntpfg 3zeruj zjuml4 1dmadst vubbuv i6s8oy 1qsxih2 1yjvs5a 1n6wxgb 1qh3bxa 16n8wpk 1ihubty ntfpy7 1vaygba 1f5kc47 1ugattu y25xid 15kjgm 5ck7xs 1lky7cb 15x2j1y 14rm9aa vlahzl 1yipi07 1k33q06 12ogyw6 ceho3e 1f8td17 1aue7hj 1sl6rns f7hjxq 1bhrv1p mpp38z ze4krk 1jnynlu 1rvtlej 116qoqd 1d3ah2d fnf71d 19fxvs2">.c-1kyvigp{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;box-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:fixed;z-index:1100;top:0;left:auto;right:0;background-color:#f5f5f5;color:rgba(0, 0, 0, 0.87);overflow:hidden;}@media print{.c-1kyvigp{position:absolute;}}.c-1ghlunn{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;display:block;padding-left:16px;padding-right:16px;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:56px;}@media (min-width:600px){.c-1ghlunn{padding-left:24px;padding-right:24px;}}@media (min-width:1200px){.c-1ghlunn{max-width:1200px;}}@media (min-width:0px){@media (orientation: landscape){.c-1ghlunn{min-height:48px;}}}@media (min-width:600px){.c-1ghlunn{min-height:64px;}}.c-i9gxme{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}.c-1x6wkub{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1.25rem;line-height:1.6;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.c-1tqdl5x{margin:0;color:inherit;-webkit-text-decoration:none;text-decoration:none;color:inherit;}.c-wb6uyc{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:0.875rem;line-height:1.43;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}@media (min-width:0px){.c-rntpfg{display:none;}}@media (min-width:600px){.c-rntpfg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.c-3zeruj{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:inherit;margin-left:24px;-webkit-text-decoration:underline;text-decoration:underline;color:inherit;}.c-3zeruj:hover{text-decoration-color:inherit;}@media (min-width:0px){.c-zjuml4{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media (min-width:600px){.c-zjuml4{display:none;}}.c-1dmadst{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;margin-right:-12px;color:inherit;padding:12px;font-size:1.75rem;}.c-1dmadst::-moz-focus-inner{border-style:none;}.c-1dmadst.Mui-disabled{pointer-events:none;cursor:default;}@media print{.c-1dmadst{-webkit-print-color-adjust:exact;color-adjust:exact;}}.c-1dmadst:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.c-1dmadst:hover{background-color:transparent;}}.c-1dmadst.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}.c-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}.c-i6s8oy{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:16px;padding-right:16px;min-height:56px;}@media (min-width:600px){.c-i6s8oy{padding-left:24px;padding-right:24px;}}@media (min-width:0px){@media (orientation: landscape){.c-i6s8oy{min-height:48px;}}}@media (min-width:600px){.c-i6s8oy{min-height:64px;}}.c-1qsxih2{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;display:block;padding-left:16px;padding-right:16px;}@media (min-width:600px){.c-1qsxih2{padding-left:24px;padding-right:24px;}}@media (min-width:1200px){.c-1qsxih2{max-width:1200px;}}.c-1yjvs5a{margin-bottom:32px;}.c-1n6wxgb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:8px 0px;}.c-1qh3bxa{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.25rem;margin-right:4px;}.c-16n8wpk{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:0.875rem;line-height:1.43;}.c-1ihubty{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1.5rem;line-height:1.334;margin-bottom:0.35em;}.c-ntfpy7{padding:0;margin:0;}.c-1vaygba{display:inline;padding:0;margin:0;}.c-1f5kc47{margin:0;color:rgba(0, 0, 0, 0.6);-webkit-text-decoration:none;text-decoration:none;}.c-1f5kc47:hover{-webkit-text-decoration:underline;text-decoration:underline;}.c-1ugattu{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:2.125rem;line-height:1.235;margin-top:32px;margin-bottom:32px;border-bottom:1px solid currentcolor;}.c-y25xid{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;margin-top:16px;margin-bottom:16px;text-align:justify;white-space:pre-line;}.c-15kjgm{margin:0;color:#1976d2;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(25, 118, 210, 0.4);}.c-15kjgm:hover{text-decoration-color:inherit;}.c-5ck7xs{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;margin-top:16px;margin-bottom:16px;}.c-5ck7xs .c-5ck7xs{margin-top:0;margin-bottom:0;}.c-1lky7cb{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;}.c-15x2j1y{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1.5rem;line-height:1.334;margin-top:24px;margin-bottom:24px;}.c-14rm9aa{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border-radius:4px;box-shadow:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);margin-top:16px;margin-bottom:16px;}.c-vlahzl{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:4px 32px;border-top-right-radius:5px;border-top-left-radius:5px;background-color:#555;color:white;}.c-1yipi07{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:5px;font-size:1.125rem;color:white;}.c-1yipi07::-moz-focus-inner{border-style:none;}.c-1yipi07.Mui-disabled{pointer-events:none;cursor:default;}@media print{.c-1yipi07{-webkit-print-color-adjust:exact;color-adjust:exact;}}.c-1yipi07:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.c-1yipi07:hover{background-color:transparent;}}.c-1yipi07.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}.c-1k33q06{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.25rem;}.c-12ogyw6{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;overflow:auto;padding:8px 32px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;}.c-ceho3e{padding:4px 8px;border-radius:4px;background-color:#1e1e1e;color:#d4d4d4;font-family:"SFMono-Regular",Consolas,Menlo,Courier,monospace,monospace;font-size:0.9em;}pre>.c-ceho3e{padding:0;background-color:transparent;}.c-1f8td17{padding:4px 8px;border-radius:4px;background-color:#1e1e1e;color:#d4d4d4;font-family:"SFMono-Regular",Consolas,Menlo,Courier,monospace,monospace;font-size:0.9em;word-break:break-all;}pre>.c-1f8td17{padding:0;background-color:transparent;}.c-1aue7hj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0;margin:32px 0px;}.c-1sl6rns{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 16px;margin:0;-webkit-flex:1;-ms-flex:1;flex:1;padding-left:0;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;}.c-f7hjxq{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;color:#1976d2;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(25, 118, 210, 0.4);}.c-f7hjxq:hover{text-decoration-color:inherit;}.c-1bhrv1p{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 16px;margin:0;border-left:1px solid #6c6c6c;border-right:1px solid #6c6c6c;}.c-mpp38z{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 16px;margin:0;-webkit-flex:1;-ms-flex:1;flex:1;padding-right:0;}.c-ze4krk{margin:32px auto;}.c-1jnynlu{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1.5rem;line-height:1.334;}.c-1rvtlej{list-style:none;padding:0;margin:0;}.c-116qoqd{padding:16px 24px;margin:16px 0px;border:1px solid #bbb;}.c-1d3ah2d{text-align:center;margin:32px 0px;}.c-fnf71d{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;margin-bottom:0.35em;}.c-19fxvs2{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:0.875rem;line-height:1.43;color:#1976d2;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(25, 118, 210, 0.4);}.c-19fxvs2:hover{text-decoration-color:inherit;}</style></head><body><div id="__next"><header amp-fx="float-in-top" class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation1 MuiAppBar-root MuiAppBar-colorDefault MuiAppBar-positionFixed mui-fixed c-1kyvigp"><div class="MuiContainer-root MuiContainer-maxWidthLg MuiToolbar-root MuiToolbar-regular c-1ghlunn"><div class="c-i9gxme"><div class="MuiTypography-root MuiTypography-h6 MuiTypography-noWrap c-1x6wkub"><a href="/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineNone c-1tqdl5x">Tech SANDBOX</a></div><p class="MuiTypography-root MuiTypography-body2 MuiTypography-noWrap c-wb6uyc">技術ブログ改め、Qiitaの下書き</p></div><nav class="MuiBox-root c-rntpfg"><a href="/" class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineAlways c-3zeruj">Blog</a><a href="https://github.com/iMasanari" target="_blank" rel="noopener" class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineAlways c-3zeruj">GitHub</a><a href="https://qiita.com/iMasanari" target="_blank" rel="noopener" class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineAlways c-3zeruj">Qiita</a></nav><div class="MuiBox-root c-zjuml4"><button tabIndex="0" type="button" aria-label="menu" class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit MuiIconButton-edgeEnd MuiIconButton-sizeLarge c-1dmadst"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="MenuIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium c-vubbuv"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button></div></div></header><div class="MuiToolbar-root MuiToolbar-gutters MuiToolbar-regular c-i6s8oy"></div><div class="MuiContainer-root MuiContainer-maxWidthLg c-1qsxih2"><article><div class="MuiBox-root c-1yjvs5a"><header><div class="c-1n6wxgb"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CalendarTodayIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1qh3bxa"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path></svg><time dateTime="2018-07-12T12:45:07.379Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2018-07-12</time></div><h1 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom c-1ihubty">ブログをHyperappベースの自作ジェネレータに変更した話</h1><ul class="c-ntfpy7"> <li class="c-1vaygba"><a href="/tags/blog/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-1f5kc47">#blog</a></li> <li class="c-1vaygba"><a href="/tags/Hyperapp/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-1f5kc47">#Hyperapp</a></li></ul></header></div><main><h2 class="MuiTypography-root MuiTypography-h4 c-1ugattu">はじめに</h2>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">作ったばかりのこのブログだが、<a href="https://github.com/hyperapp/hyperapp" target="_blank" rel="noopener" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-15kjgm">Hyperapp</a>ベースのstaticでSPAなサイトに変更した。
<a href="https://github.com/nozzle/react-static" target="_blank" rel="noopener" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-15kjgm">React Static</a>を使用していた時とは違って、HTMLの書き出しなどは自分で処理を行っている。まだ未完成な機能もあるが、ビルド後のJavaScriptが約8KBと軽量で気に入っている。</p>
<h2 class="MuiTypography-root MuiTypography-h4 c-1ugattu">なぜ変更したのか</h2>
<ul class="MuiTypography-root MuiTypography-body1 c-5ck7xs">
<li class="MuiTypography-root MuiTypography-body1 c-1lky7cb"><a href="/blog/use-technology/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-15kjgm">ブログで使用した技術</a>の通り
<ul class="MuiTypography-root MuiTypography-body1 c-5ck7xs">
<li class="MuiTypography-root MuiTypography-body1 c-1lky7cb"><a href="https://github.com/hyperapp/hyperapp" target="_blank" rel="noopener" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-15kjgm">Hyperapp</a>があるじゃんとなったのがきっかけ</li>
</ul>
</li>
<li class="MuiTypography-root MuiTypography-body1 c-1lky7cb">ブログではstateやactionがページ遷移関係でしか使っていないことに気づいた
<ul class="MuiTypography-root MuiTypography-body1 c-5ck7xs">
<li class="MuiTypography-root MuiTypography-body1 c-1lky7cb">全て<a href="https://github.com/nozzle/react-static" target="_blank" rel="noopener" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-15kjgm">React Static</a>に隠されている</li>
</ul>
</li>
<li class="MuiTypography-root MuiTypography-body1 c-1lky7cb">車輪の再発明が好き</li>
</ul>
<h2 class="MuiTypography-root MuiTypography-h4 c-1ugattu">移行について</h2>
<h3 class="MuiTypography-root MuiTypography-h5 c-15x2j1y">View部分</h3>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">jsxが流用できたのでView部分は楽だった。もともとSFCのみでクラスコンポーネントがほぼない。メインコンテンツである記事はmarkdown管理なので問題なし。</p>
<div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation4 c-14rm9aa"><div class="c-vlahzl"><span class="MuiTypography-root MuiTypography-body1 c-1lky7cb"></span><button tabIndex="0" type="button" aria-label="copy" class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall c-1yipi07"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ContentCopyIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1k33q06"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button></div><pre style="background-color: #1E1E1E;" class="MuiTypography-root MuiTypography-body1 shiki c-12ogyw6"><code class="c-ceho3e"><span class="line"><span style="color: #CE9178;">-import React from 'react'</span></span>
<span class="line"><span style="color: #CE9178;">-import { Link } from 'react-static'</span></span>
<span class="line"><span style="color: #B5CEA8;">+import { h } from 'hyperapp'</span></span>
<span class="line"><span style="color: #B5CEA8;">+import { Link } from '@hyperapp/router'</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4;"> // 中略</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CE9178;">-export default withRouteData(</span></span>
<span class="line"><span style="color: #CE9178;">-  ({ posts }: Props) =></span></span>
<span class="line"><span style="color: #CE9178;">-    &lt;div className=&quot;&quot;></span></span>
<span class="line"><span style="color: #B5CEA8;">+export default ({ posts }: Props) =></span></span>
<span class="line"><span style="color: #B5CEA8;">+  &lt;div class=&quot;&quot;></span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4;"> // 後略</span></span></code></pre></div>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">コンポーネントで実際に変更したのはこのくらい。</p>
<h3 class="MuiTypography-root MuiTypography-h5 c-15x2j1y">ビルドスクリプトはなんとかなる</h3>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">なんとかなった。</p>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid"><code class="c-1f8td17">requireWithRollup</code>関数を作れたのが大きい。</p>
<div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation4 c-14rm9aa"><div class="c-vlahzl"><span class="MuiTypography-root MuiTypography-body1 c-1lky7cb"></span><button tabIndex="0" type="button" aria-label="copy" class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall c-1yipi07"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ContentCopyIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1k33q06"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button></div><pre style="background-color: #1E1E1E;" class="MuiTypography-root MuiTypography-body1 shiki c-12ogyw6"><code class="c-ceho3e"><span class="line"><span style="color: #6A9955;">// rollupのpluginを適用してrequireできる</span></span>
<span class="line"><span style="color: #569CD6;">const</span><span style="color: #D4D4D4;"> </span><span style="color: #4FC1FF;">Template</span><span style="color: #D4D4D4;"> = </span><span style="color: #C586C0;">await</span><span style="color: #D4D4D4;"> </span><span style="color: #DCDCAA;">requireWithRollup</span><span style="color: #D4D4D4;">(</span><span style="color: #CE9178;">'./src/Template.tsx'</span><span style="color: #D4D4D4;">, </span><span style="color: #9CDCFE;">rollupConfig</span><span style="color: #D4D4D4;">)</span></span></code></pre></div>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">実装は<a href="https://github.com/iMasanari/imasanari.github.io/blob/9ab02e264623038b6d296fa0b0a6171be93907ee/scripts/requireWithRollup.js" target="_blank" rel="noopener" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-15kjgm">ここ</a>。rollup.jsが自身の設定ファイルを読み込む方法を参考にした。</p>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">設定ファイルやビルド方法は<a href="https://github.com/nozzle/react-static" target="_blank" rel="noopener" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-15kjgm">React Static</a>を<s>パクった</s>かなり参考にした。</p>
<h2 class="MuiTypography-root MuiTypography-h4 c-1ugattu">ルーティング、およびページ遷移部分</h2>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">ここが一番苦労している。エントリーポイントのindex.tsxがごちゃごちゃしてしまった。書き直すならここ。</p>
<h2 class="MuiTypography-root MuiTypography-h4 c-1ugattu">未実装部分</h2>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">ページ遷移周りが適当</p>
<ul class="MuiTypography-root MuiTypography-body1 c-5ck7xs">
<li class="MuiTypography-root MuiTypography-body1 c-1lky7cb">ページプリキャッシュ部分
<ul class="MuiTypography-root MuiTypography-body1 c-5ck7xs">
<li class="MuiTypography-root MuiTypography-body1 c-1lky7cb">現在はリンククリック時にjson読み込み</li>
<li class="MuiTypography-root MuiTypography-body1 c-1lky7cb">prefetchやpreloadで先読み？　それともServise Workerを使う？</li>
<li class="MuiTypography-root MuiTypography-body1 c-1lky7cb">スクリプトが軽いのでいっそJSで雑に先読みしちゃうのもありかも
<ul class="MuiTypography-root MuiTypography-body1 c-5ck7xs">
<li class="MuiTypography-root MuiTypography-body1 c-1lky7cb">【追記】この方法で仮実装</li>
</ul>
</li>
</ul>
</li>
<li class="MuiTypography-root MuiTypography-body1 c-1lky7cb">iPhoneでスワイプして戻るとちらつく
<ul class="MuiTypography-root MuiTypography-body1 c-5ck7xs">
<li class="MuiTypography-root MuiTypography-body1 c-1lky7cb">前画面のデータをキャッシュしててもダメ</li>
<li class="MuiTypography-root MuiTypography-body1 c-1lky7cb"><a href="https://github.com/nozzle/react-static" target="_blank" rel="noopener" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-15kjgm">React Static</a>の時には起こらなかった</li>
</ul>
</li>
</ul>
<h2 class="MuiTypography-root MuiTypography-h4 c-1ugattu">やるかどうかわからない</h2>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">ジェネレータ部分を分離</p></main></article><ul class="c-1aue7hj"><li class="c-1sl6rns"><a href="/blog/webpacks-rules-in-static-config-js/" class="MuiTypography-root MuiTypography-body1 MuiLink-root MuiLink-underlineAlways c-f7hjxq">React StaticでTypeScriptを使用した時のエラー対処法</a></li><li class="c-1bhrv1p"><a href="/" class="MuiTypography-root MuiTypography-body1 MuiLink-root MuiLink-underlineAlways c-f7hjxq">HOME</a></li><li class="c-mpp38z"><a href="/blog/remove-object-key/" class="MuiTypography-root MuiTypography-body1 MuiLink-root MuiLink-underlineAlways c-f7hjxq">【ES.next】Objectから任意のキーを削除した新しいObjectを作成する</a></li></ul><aside class="c-ze4krk"><header><h1 class="MuiTypography-root MuiTypography-h5 c-1jnynlu">同じタグを含む記事</h1><ul class="c-ntfpy7"> <li class="c-1vaygba"><a href="/tags/blog/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-1f5kc47">#blog</a></li> <li class="c-1vaygba"><a href="/tags/Hyperapp/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-1f5kc47">#Hyperapp</a></li></ul></header><main><ul class="c-1rvtlej"><li class="c-116qoqd"><article><header><div class="c-1n6wxgb"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CalendarTodayIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1qh3bxa"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path></svg><time dateTime="2020-11-28T08:05:18.607Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2020-11-28</time></div><h1 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom c-1ihubty"><a href="/blog/use-amp/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-15kjgm">ブログをAMP対応（仮）しました</a></h1><ul class="c-ntfpy7"> <li class="c-1vaygba"><a href="/tags/AMP/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-1f5kc47">#AMP</a></li> <li class="c-1vaygba"><a href="/tags/Next.js" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-1f5kc47">#Next.js</a></li> <li class="c-1vaygba"><a href="/tags/blog/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-1f5kc47">#blog</a></li></ul></header></article></li><li class="c-116qoqd"><article><header><div class="c-1n6wxgb"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CalendarTodayIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1qh3bxa"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path></svg><time dateTime="2020-09-20T06:33:49.199Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2020-09-20</time></div><h1 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom c-1ihubty"><a href="/blog/use-next/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-15kjgm">ブログをNext.jsベースに変更した</a></h1><ul class="c-ntfpy7"> <li class="c-1vaygba"><a href="/tags/React/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-1f5kc47">#React</a></li> <li class="c-1vaygba"><a href="/tags/Next.js" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-1f5kc47">#Next.js</a></li> <li class="c-1vaygba"><a href="/tags/blog/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-1f5kc47">#blog</a></li></ul></header></article></li><li class="c-116qoqd"><article><header><div class="c-1n6wxgb"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CalendarTodayIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1qh3bxa"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path></svg><time dateTime="2019-04-26T13:55:56.097Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2019-04-26</time></div><h1 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom c-1ihubty"><a href="/blog/use-parcel/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-15kjgm">ブログ開発をParcelに変更した</a></h1><ul class="c-ntfpy7"> <li class="c-1vaygba"><a href="/tags/parcel/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-1f5kc47">#parcel</a></li> <li class="c-1vaygba"><a href="/tags/blog/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-1f5kc47">#blog</a></li></ul></header></article></li></ul></main></aside></div><footer class="c-1d3ah2d"><div class="MuiContainer-root MuiContainer-maxWidthLg c-1qsxih2"><p class="MuiTypography-root MuiTypography-body1 MuiTypography-gutterBottom c-fnf71d">Author: <a href="https://github.com/iMasanari" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-15kjgm">iMasanari</a></p><a href="https://github.com/iMasanari/imasanari.github.io/" class="MuiTypography-root MuiTypography-body2 MuiLink-root MuiLink-underlineAlways c-19fxvs2">Show on GitHub</a></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"ブログをHyperappベースの自作ジェネレータに変更した話","description":"作ったばかりのこのブログだが、Hyperappで動くstaticでSPAなサイトに変更した。React Staticを使用していた時とは違って、HTMLの書き出しなどは自分で処理を行っている。まだ未完成な機能もあるが、ビルド後のJavaScriptが約8KBと軽量で気に入っている。","slug":"use-hyperapp","tags":["blog","Hyperapp"],"date":"2018-07-12T12:45:07.379Z","update":null,"image":"/images/hyperapp.png","draft":false},"next":{"title":"【ES.next】Objectから任意のキーを削除した新しいObjectを作成する","description":"ブログを作る前、Qiitaに投稿しようと書いていたけど途中でやめ、最近まで忘れていた記事です。Qiitaでもいいけど、せっかくだからこっちに置いておきます。","slug":"remove-object-key","tags":["JavaScript","Babel","TypeScript"],"date":"2018-07-13T12:47:36.148Z","update":null,"image":null,"draft":false},"prev":{"title":"React StaticでTypeScriptを使用した時のエラー対処法","description":"static.config.jsのwebpack設定を変更することで起こるエラーの対処法。","slug":"webpacks-rules-in-static-config-js","tags":["ReactStatic","TypeScript","webpack"],"date":"2018-07-03T11:47:13.910Z","update":null,"image":null,"draft":false},"sameTags":[{"title":"ブログをAMP対応（仮）しました","description":"実質、各ページに `export const config = { amp: 'hybrid' }` を追加しただけ。next.js超ラク。","slug":"use-amp","tags":["AMP","Next.js","blog"],"date":"2020-11-28T08:05:18.607Z","update":null,"image":null,"draft":false},{"title":"ブログをNext.jsベースに変更した","description":"","slug":"use-next","tags":["React","Next.js","blog"],"date":"2020-09-20T06:33:49.199Z","update":null,"image":null,"draft":false},{"title":"ブログ開発をParcelに変更した","description":"前回の記事でparcelを使用して便利だったので、このブログのモジュールバンドラをparcelに変更した。決め手は、Tree Shakingがサポートされていたから。","slug":"use-parcel","tags":["parcel","blog"],"date":"2019-04-26T13:55:56.097Z","update":null,"image":null,"draft":false}],"content":"\u003ch2\u003eはじめに\u003c/h2\u003e\n\u003cp\u003e作ったばかりのこのブログだが、\u003ca href=\"https://github.com/hyperapp/hyperapp\"\u003eHyperapp\u003c/a\u003eベースのstaticでSPAなサイトに変更した。\n\u003ca href=\"https://github.com/nozzle/react-static\"\u003eReact Static\u003c/a\u003eを使用していた時とは違って、HTMLの書き出しなどは自分で処理を行っている。まだ未完成な機能もあるが、ビルド後のJavaScriptが約8KBと軽量で気に入っている。\u003c/p\u003e\n\u003ch2\u003eなぜ変更したのか\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/blog/use-technology/\"\u003eブログで使用した技術\u003c/a\u003eの通り\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/hyperapp/hyperapp\"\u003eHyperapp\u003c/a\u003eがあるじゃんとなったのがきっかけ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eブログではstateやactionがページ遷移関係でしか使っていないことに気づいた\n\u003cul\u003e\n\u003cli\u003e全て\u003ca href=\"https://github.com/nozzle/react-static\"\u003eReact Static\u003c/a\u003eに隠されている\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e車輪の再発明が好き\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e移行について\u003c/h2\u003e\n\u003ch3\u003eView部分\u003c/h3\u003e\n\u003cp\u003ejsxが流用できたのでView部分は楽だった。もともとSFCのみでクラスコンポーネントがほぼない。メインコンテンツである記事はmarkdown管理なので問題なし。\u003c/p\u003e\n\u003capp-code-wrapper lang=\"diff\" code=\"-import React from \u0026#x27;react\u0026#x27;\n-import { Link } from \u0026#x27;react-static\u0026#x27;\n+import { h } from \u0026#x27;hyperapp\u0026#x27;\n+import { Link } from \u0026#x27;@hyperapp/router\u0026#x27;\n\n // 中略\n\n-export default withRouteData(\n-  ({ posts }: Props) =\u003e\n-    \u003cdiv className=\u0026#x22;\u0026#x22;\u003e\n+export default ({ posts }: Props) =\u003e\n+  \u003cdiv class=\u0026#x22;\u0026#x22;\u003e\n\n // 後略\"\u003e\u003cpre class=\"shiki\" style=\"background-color: #1E1E1E\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CE9178\"\u003e-import React from \u0026#39;react\u0026#39;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CE9178\"\u003e-import { Link } from \u0026#39;react-static\u0026#39;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #B5CEA8\"\u003e+import { h } from \u0026#39;hyperapp\u0026#39;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #B5CEA8\"\u003e+import { Link } from \u0026#39;@hyperapp/router\u0026#39;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e // 中略\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CE9178\"\u003e-export default withRouteData(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CE9178\"\u003e-  ({ posts }: Props) =\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CE9178\"\u003e-    \u0026lt;div className=\u0026quot;\u0026quot;\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #B5CEA8\"\u003e+export default ({ posts }: Props) =\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #B5CEA8\"\u003e+  \u0026lt;div class=\u0026quot;\u0026quot;\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e // 後略\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/app-code-wrapper\u003e\n\u003cp\u003eコンポーネントで実際に変更したのはこのくらい。\u003c/p\u003e\n\u003ch3\u003eビルドスクリプトはなんとかなる\u003c/h3\u003e\n\u003cp\u003eなんとかなった。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003erequireWithRollup\u003c/code\u003e関数を作れたのが大きい。\u003c/p\u003e\n\u003capp-code-wrapper lang=\"js\" code=\"// rollupのpluginを適用してrequireできる\nconst Template = await requireWithRollup(\u0026#x27;./src/Template.tsx\u0026#x27;, rollupConfig)\"\u003e\u003cpre class=\"shiki\" style=\"background-color: #1E1E1E\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A9955\"\u003e// rollupのpluginを適用してrequireできる\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #569CD6\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #4FC1FF\"\u003eTemplate\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e = \u003c/span\u003e\u003cspan style=\"color: #C586C0\"\u003eawait\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #DCDCAA\"\u003erequireWithRollup\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CE9178\"\u003e\u0026#39;./src/Template.tsx\u0026#39;\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003erollupConfig\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/app-code-wrapper\u003e\n\u003cp\u003e実装は\u003ca href=\"https://github.com/iMasanari/imasanari.github.io/blob/9ab02e264623038b6d296fa0b0a6171be93907ee/scripts/requireWithRollup.js\"\u003eここ\u003c/a\u003e。rollup.jsが自身の設定ファイルを読み込む方法を参考にした。\u003c/p\u003e\n\u003cp\u003e設定ファイルやビルド方法は\u003ca href=\"https://github.com/nozzle/react-static\"\u003eReact Static\u003c/a\u003eを\u003cs\u003eパクった\u003c/s\u003eかなり参考にした。\u003c/p\u003e\n\u003ch2\u003eルーティング、およびページ遷移部分\u003c/h2\u003e\n\u003cp\u003eここが一番苦労している。エントリーポイントのindex.tsxがごちゃごちゃしてしまった。書き直すならここ。\u003c/p\u003e\n\u003ch2\u003e未実装部分\u003c/h2\u003e\n\u003cp\u003eページ遷移周りが適当\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eページプリキャッシュ部分\n\u003cul\u003e\n\u003cli\u003e現在はリンククリック時にjson読み込み\u003c/li\u003e\n\u003cli\u003eprefetchやpreloadで先読み？　それともServise Workerを使う？\u003c/li\u003e\n\u003cli\u003eスクリプトが軽いのでいっそJSで雑に先読みしちゃうのもありかも\n\u003cul\u003e\n\u003cli\u003e【追記】この方法で仮実装\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eiPhoneでスワイプして戻るとちらつく\n\u003cul\u003e\n\u003cli\u003e前画面のデータをキャッシュしててもダメ\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/nozzle/react-static\"\u003eReact Static\u003c/a\u003eの時には起こらなかった\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eやるかどうかわからない\u003c/h2\u003e\n\u003cp\u003eジェネレータ部分を分離\u003c/p\u003e"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"use-hyperapp"},"buildId":"sshnfDrKevPjfNC6WQ_tP","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>