<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>GitHub PagesのUser Pageにdistフォルダをデプロイする | Tech SANDBOX</title><meta name="description" content="User Pageにはmasterブランチしか指定できないようです。そこに任意のフォルダの中身をデプロイする方法を書きました。"/><meta property="og:title" content="GitHub PagesのUser Pageにdistフォルダをデプロイする"/><meta property="og:description" content="User Pageにはmasterブランチしか指定できないようです。そこに任意のフォルダの中身をデプロイする方法を書きました。"/><meta property="og:type" content="article"/><meta property="og:url" content="https://imasanari.github.io/blog/deploy-to-github-pages-user-page"/><meta property="og:image" content="https://imasanari.github.io/images/icon.jpg"/><meta property="og:site_name" content="Tech SANDBOX"/><meta name="twitter:card" content="summary"/><meta name="next-head-count" content="11"/><link rel="preload" href="/_next/static/css/d4bd6111bf22fa15fd71.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d4bd6111bf22fa15fd71.css"/><link rel="preload" href="/_next/static/chunks/main-f01cf1dcca173d7f43b1.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-ccf5ab034a524403276a.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.6c6c2144b5674c37af03.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.65195c3ca934dc067d4c.js" as="script"/><link rel="preload" href="/_next/static/chunks/750b2726a69f361bcb8ab59f8396713b1d057f97.eb739be10f1a321b366c.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-970c9d204f95e252b248.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bslug%5D-dbdb6dab1991e2a52bd5.js" as="script"/><style id="__jsx-2257550242">.SiteTitle.jsx-2257550242{font-size:2rem;margin:1rem 0;}</style><style id="__jsx-1424798431">.Tags.jsx-1424798431{padding:0;}.item.jsx-1424798431{display:inline;margin:0 0.2em;}.link.jsx-1424798431{color:var(--color-text-secondary);}</style><style id="__jsx-2638938446">.PostPager.jsx-2638938446{display:table;max-width:var(--width-content);margin:2rem auto;}.item.jsx-2638938446{box-sizing:border-box;display:table-cell;width:33.3%;padding:0.5rem;text-align:center;vertical-align:middle;}.home.jsx-2638938446{border-left:1px solid #6c6c6c;border-right:1px solid #6c6c6c;}</style><style id="__jsx-101915585">.Footer.jsx-101915585{text-align:center;}</style><style id="__jsx-2377730788">main{display:block;}header+main{padding-top:0;}header:last-child{padding-bottom:0;}pre{overflow:auto;max-width:none;padding:0.5rem 2rem;background:#272822;}pre code,pre samp{display:inline;padding:0;}.token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string{background:transparent;}@media (prefers-color-scheme:dark){:root{--color:#0097fc;--color-accent:#0097fc4f;--color-bg:#333;--color-bg-secondary:#555;--color-secondary:#e20de9;--color-secondary-accent:#e20de94f;--color-shadow:#bbbbbb20;--color-text:#f7f7f7;--color-text-secondary:#aaa;}}</style></head><body><div id="__next"><header><div class="jsx-2257550242 SiteTitle"><a class="jsx-2257550242" href="/">Tech SANDBOX</a></div><p>技術ブログ改め、Qiitaの下書き</p></header><div><article><header><time dateTime="2018-07-01T15:11:38.719Z">2018-07-01</time><h1>GitHub PagesのUser Pageにdistフォルダをデプロイする</h1><ul class="jsx-1424798431 Tags"><li class="jsx-1424798431 item"><a class="jsx-1424798431 link" href="/tags/GitHubPages/">#<!-- -->GitHubPages</a></li></ul></header><main><div><h2 id="user-pageにはmasterブランチしか指定できない">User Pageにはmasterブランチしか指定できない</h2><p>みたいです。
しかもルート指定もできないようです。</p><p>GitHubは今までProject Pageしか使っていなかったので、<code>gh-pages</code>ブランチを指定できず焦りました。
というわけでググります。</p><h2 id="どうやらmasterを殺せばいいらしい">どうやらmasterを殺せばいいらしい</h2><p>このQiitaの記事を参考に作業していきます。</p><p><a href="https://qiita.com/kwappa/items/03ffdeb89039a7249619">GitHub PagesのUser Pagesでドキュメントルートを変更するにはmasterを殺す</a></p><p><code>master</code>ブランチを削除して、指定フォルダをsubtreeとしてpushするらしいです。</p><p>手順通りに作業し、残るはpushのみ…</p><pre><code class="language-bash" data-language="bash" data-highlighted-line-numbers="">$ <span class="token function">git</span> subtree push --prefix dist/ origin master
<span class="token function">git</span> push using:  origin master
No new revisions were found
</code></pre><p>はい、うまくいかず！
<code>master</code>ブランチは追加されませんでした。</p><p><code>No new revisions were found</code>を読むと、更新ファイルが無いとのことらしいです。<code>dist</code>フォルダを<code>.gitignore</code>しているのが原因でしょう。</p><h2 id="gh-pagesに頼る">gh-pagesに頼る</h2><p><code>dist</code>フォルダを開発のgit管理に入れたくないし、だからと言ってデプロイのたびに<code>add -f</code>していくのは面倒です。
なので、<a href="https://github.com/tschaub/gh-pages">gh-pages</a>で<code>master</code>にデプロイできるか試してみます。</p><p>調べてみると、どうやらブランチを指定するオプションは<code>-b</code>(<code>--branch</code>)のようです。
実は<code>gh-pages</code>ブランチにpushした時はこれを使ったんですけど、subtreeをpushする方法を調べた時にアンインストールしてしまっていたんですね。
再インストールして、以下のコマンドを叩きます。</p><pre><code class="language-bash" data-language="bash" data-highlighted-line-numbers="">$ npx gh-pages -d dist -b master
</code></pre><p>これで無事デプロイが完了しました！</p><h2 id="まとめ">まとめ</h2><p>gitにはsubtreeという機能がある。
でも<code>.gitignore</code>が優先されてしまう。
<a href="https://github.com/tschaub/gh-pages">gh-pages</a>が超便利！</p></div></main></article><div class="jsx-2638938446 PostPager"><div class="jsx-2638938446 item"><a class="jsx-2638938446" href="/blog/use-technology/">ブログで使用した技術</a></div><div class="jsx-2638938446 item home"><a class="jsx-2638938446" href="/">HOME</a></div><div class="jsx-2638938446 item"><a class="jsx-2638938446" href="/blog/webpacks-rules-in-static-config-js/">React StaticでTypeScriptを使用した時のエラー対処法</a></div></div></div><footer class="jsx-101915585 Footer"><p class="jsx-101915585">Author: <a href="https://github.com/iMasanari" class="jsx-101915585">iMasanari</a></p><small class="jsx-101915585"><a href="https://github.com/iMasanari/imasanari.github.io/" class="jsx-101915585">Show on GitHub</a></small></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"GitHub PagesのUser Pageにdistフォルダをデプロイする","description":"User Pageにはmasterブランチしか指定できないようです。そこに任意のフォルダの中身をデプロイする方法を書きました。","slug":"deploy-to-github-pages-user-page","tags":["GitHubPages"],"date":"2018-07-01T15:11:38.719Z","update":"2018-07-02T13:49:48.876Z","body":"\u003ch2 id=\"user-pageにはmasterブランチしか指定できない\"\u003eUser Pageにはmasterブランチしか指定できない\u003c/h2\u003e\u003cp\u003eみたいです。\nしかもルート指定もできないようです。\u003c/p\u003e\u003cp\u003eGitHubは今までProject Pageしか使っていなかったので、\u003ccode\u003egh-pages\u003c/code\u003eブランチを指定できず焦りました。\nというわけでググります。\u003c/p\u003e\u003ch2 id=\"どうやらmasterを殺せばいいらしい\"\u003eどうやらmasterを殺せばいいらしい\u003c/h2\u003e\u003cp\u003eこのQiitaの記事を参考に作業していきます。\u003c/p\u003e\u003cp\u003e\u003ca href=\"https://qiita.com/kwappa/items/03ffdeb89039a7249619\"\u003eGitHub PagesのUser Pagesでドキュメントルートを変更するにはmasterを殺す\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ccode\u003emaster\u003c/code\u003eブランチを削除して、指定フォルダをsubtreeとしてpushするらしいです。\u003c/p\u003e\u003cp\u003e手順通りに作業し、残るはpushのみ…\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-bash\" data-language=\"bash\" data-highlighted-line-numbers=\"\"\u003e$ \u003cspan class=\"token function\"\u003egit\u003c/span\u003e subtree push --prefix dist/ origin master\n\u003cspan class=\"token function\"\u003egit\u003c/span\u003e push using:  origin master\nNo new revisions were found\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eはい、うまくいかず！\n\u003ccode\u003emaster\u003c/code\u003eブランチは追加されませんでした。\u003c/p\u003e\u003cp\u003e\u003ccode\u003eNo new revisions were found\u003c/code\u003eを読むと、更新ファイルが無いとのことらしいです。\u003ccode\u003edist\u003c/code\u003eフォルダを\u003ccode\u003e.gitignore\u003c/code\u003eしているのが原因でしょう。\u003c/p\u003e\u003ch2 id=\"gh-pagesに頼る\"\u003egh-pagesに頼る\u003c/h2\u003e\u003cp\u003e\u003ccode\u003edist\u003c/code\u003eフォルダを開発のgit管理に入れたくないし、だからと言ってデプロイのたびに\u003ccode\u003eadd -f\u003c/code\u003eしていくのは面倒です。\nなので、\u003ca href=\"https://github.com/tschaub/gh-pages\"\u003egh-pages\u003c/a\u003eで\u003ccode\u003emaster\u003c/code\u003eにデプロイできるか試してみます。\u003c/p\u003e\u003cp\u003e調べてみると、どうやらブランチを指定するオプションは\u003ccode\u003e-b\u003c/code\u003e(\u003ccode\u003e--branch\u003c/code\u003e)のようです。\n実は\u003ccode\u003egh-pages\u003c/code\u003eブランチにpushした時はこれを使ったんですけど、subtreeをpushする方法を調べた時にアンインストールしてしまっていたんですね。\n再インストールして、以下のコマンドを叩きます。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-bash\" data-language=\"bash\" data-highlighted-line-numbers=\"\"\u003e$ npx gh-pages -d dist -b master\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eこれで無事デプロイが完了しました！\u003c/p\u003e\u003ch2 id=\"まとめ\"\u003eまとめ\u003c/h2\u003e\u003cp\u003egitにはsubtreeという機能がある。\nでも\u003ccode\u003e.gitignore\u003c/code\u003eが優先されてしまう。\n\u003ca href=\"https://github.com/tschaub/gh-pages\"\u003egh-pages\u003c/a\u003eが超便利！\u003c/p\u003e"},"next":{"title":"React StaticでTypeScriptを使用した時のエラー対処法","description":"static.config.jsのwebpack設定を変更することで起こるエラーの対処法。","slug":"webpacks-rules-in-static-config-js","tags":["ReactStatic","TypeScript","webpack"],"date":"2018-07-03T11:47:13.910Z"},"prev":{"title":"ブログで使用した技術","description":"この技術ブログで使用したライブラリやツールを紹介していきます。選定理由についても書きました。","slug":"use-technology","tags":["blog","React","preact","TypeScript","ReactStatic"],"date":"2018-06-30T14:52:29.225Z","update":"2019-04-20T13:15:27.878Z"},"sameTags":[]},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"deploy-to-github-pages-user-page"},"buildId":"iFlvsFMvkPR2E7Gseh1Jo","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-a5b86a38e61b63f3b3a9.js"></script><script src="/_next/static/chunks/main-f01cf1dcca173d7f43b1.js" async=""></script><script src="/_next/static/chunks/webpack-ccf5ab034a524403276a.js" async=""></script><script src="/_next/static/chunks/framework.6c6c2144b5674c37af03.js" async=""></script><script src="/_next/static/chunks/commons.65195c3ca934dc067d4c.js" async=""></script><script src="/_next/static/chunks/750b2726a69f361bcb8ab59f8396713b1d057f97.eb739be10f1a321b366c.js" async=""></script><script src="/_next/static/chunks/pages/_app-970c9d204f95e252b248.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-dbdb6dab1991e2a52bd5.js" async=""></script><script src="/_next/static/iFlvsFMvkPR2E7Gseh1Jo/_buildManifest.js" async=""></script><script src="/_next/static/iFlvsFMvkPR2E7Gseh1Jo/_ssgManifest.js" async=""></script></body></html>