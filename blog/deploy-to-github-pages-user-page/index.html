<!DOCTYPE html><html lang=ja-JP prefix="og: http://ogp.me/ns#"><head><script src="https://www.googletagmanager.com/gtag/js?id=UA-74494516-4" async></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-74494516-4")</script><link href=/bundle.jk550k1p.js rel=preload as=script><meta charset=UTF-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="ie=edge" http-equiv=X-UA-Compatible><title>GitHub PagesのUser Pageにdistフォルダをデプロイする - Tech SANDBOX</title><link href=/bundle.jk550k1p.css rel=stylesheet><meta content="GitHub PagesのUser Pageにdistフォルダをデプロイする - Tech SANDBOX" property=og:title><meta content=article property=og:type><meta content="User Pageにはmasterブランチしか指定できないようです。そこに任意のフォルダの中身をデプロイする方法を書きました。" property=og:description><meta content=https://imasanari.github.io/blog/deploy-to-github-pages-user-page property=og:url><meta content=https://imasanari.github.io/images/icon.jpg property=og:image><meta content=summary name=twitter:card></head><body><div class=App><header class=Header><h1 class=Header-title><a href=/ >Tech SANDBOX</a></h1></header><div class=content><div><article><span>2018-07-02</span><h1>GitHub PagesのUser Pageにdistフォルダをデプロイする</h1><ul class=PostTags><li class=PostTags-li><a href=/tags/GitHubPages/ class=PostTags-Link>GitHubPages</a> </li></ul><div><h2>User Pageにはmasterブランチしか指定できない</h2><p>みたいです。<br>しかもルート指定もできないようです。</p><p>GitHubは今までProject Pageしか使っていなかったので、<code>gh-pages</code>ブランチを指定できず焦りました。<br>というわけでググります。</p><h2>どうやらmasterを殺せばいいらしい</h2><p>このQiitaの記事を参考に作業していきます。</p><p><a href=https://qiita.com/kwappa/items/03ffdeb89039a7249619 rel=noopener target=_blank>GitHub PagesのUser Pagesでドキュメントルートを変更するにはmasterを殺す</a></p><p><code>master</code>ブランチを削除して、指定フォルダをsubtreeとしてpushするらしいです。</p><p>手順通りに作業し、残るはpushのみ…</p><pre class=language-bash><code class=language-bash>$ <span class="function token">git</span> subtree push --prefix dist/ origin master
<span class="function token">git</span> push using:  origin master
No new revisions were found
</code></pre><p>はい、うまくいかず！<br><code>master</code>ブランチは追加されませんでした。</p><p><code>No new revisions were found</code>を読むと、更新ファイルが無いとのことらしいです。<code>dist</code>フォルダを<code>.gitignore</code>しているのが原因でしょう。</p><h2>gh-pagesに頼る</h2><p><code>dist</code>フォルダを開発のgit管理に入れたくないし、だからと言ってデプロイのたびに<code>add -f</code>していくのは面倒です。<br>なので、<a href=https://github.com/tschaub/gh-pages rel=noopener target=_blank>gh-pages</a>で<code>master</code>にデプロイできるか試してみます。</p><p>調べてみると、どうやらブランチを指定するオプションは<code>-b</code>(<code>--branch</code>)のようです。<br>実は<code>gh-pages</code>ブランチにpushした時はこれを使ったんですけど、subtreeをpushする方法を調べた時にアンインストールしてしまっていたんですね。<br>再インストールして、以下のコマンドを叩きます。</p><pre class=language-bash><code class=language-bash>$ npx gh-pages -d dist -b master
</code></pre><p>これで無事デプロイが完了しました！</p><h2>まとめ</h2><p>gitにはsubtreeという機能がある<br>でも<code>.gitignore</code>が優先されてしまう<br><a href=https://github.com/tschaub/gh-pages rel=noopener target=_blank>gh-pages</a>が超便利！</p></div></article><div class=PostPager><div class=PostPager-item><a href=/blog/webpacks-rules-in-static-config-js/ >React StaticでTypeScriptを使用した時のエラー対処法</a></div><div class=PostPager-item><a href=/ >HOME</a></div><div class=PostPager-item><a href=/blog/use-technology/ >ブログで使用した技術</a></div></div></div></div><footer class=Footer><p>Author: <a href=https://github.com/iMasanari>iMasanari</a></p><small><a href=https://github.com/iMasanari/imasanari.github.io/ >&gt; Blog Repository &lt;</a></small></footer></div><script>var __data={component:1,title:"GitHub PagesのUser Pageにdistフォルダをデプロイする - Tech SANDBOX",props:{post:{title:"GitHub PagesのUser Pageにdistフォルダをデプロイする",description:"User Pageにはmasterブランチしか指定できないようです。そこに任意のフォルダの中身をデプロイする方法を書きました。",slug:"deploy-to-github-pages-user-page",tags:["GitHubPages"],date:"2018-07-02",update:"2018-07-02T13:49:48.876Z",contents:"<h2>User Pageにはmasterブランチしか指定できない</h2><p>みたいです。<br>しかもルート指定もできないようです。</p><p>GitHubは今までProject Pageしか使っていなかったので、<code>gh-pages</code>ブランチを指定できず焦りました。<br>というわけでググります。</p><h2>どうやらmasterを殺せばいいらしい</h2><p>このQiitaの記事を参考に作業していきます。</p><p><a href=https://qiita.com/kwappa/items/03ffdeb89039a7249619 rel=noopener target=_blank>GitHub PagesのUser Pagesでドキュメントルートを変更するにはmasterを殺す</a></p><p><code>master</code>ブランチを削除して、指定フォルダをsubtreeとしてpushするらしいです。</p><p>手順通りに作業し、残るはpushのみ…</p><pre class=language-bash><code class=language-bash>$ <span class='function token'>git</span> subtree push --prefix dist/ origin master\n<span class='function token'>git</span> push using:  origin master\nNo new revisions were found\n</code></pre><p>はい、うまくいかず！<br><code>master</code>ブランチは追加されませんでした。</p><p><code>No new revisions were found</code>を読むと、更新ファイルが無いとのことらしいです。<code>dist</code>フォルダを<code>.gitignore</code>しているのが原因でしょう。</p><h2>gh-pagesに頼る</h2><p><code>dist</code>フォルダを開発のgit管理に入れたくないし、だからと言ってデプロイのたびに<code>add -f</code>していくのは面倒です。<br>なので、<a href=https://github.com/tschaub/gh-pages rel=noopener target=_blank>gh-pages</a>で<code>master</code>にデプロイできるか試してみます。</p><p>調べてみると、どうやらブランチを指定するオプションは<code>-b</code>(<code>--branch</code>)のようです。<br>実は<code>gh-pages</code>ブランチにpushした時はこれを使ったんですけど、subtreeをpushする方法を調べた時にアンインストールしてしまっていたんですね。<br>再インストールして、以下のコマンドを叩きます。</p><pre class=language-bash><code class=language-bash>$ npx gh-pages -d dist -b master\n</code></pre><p>これで無事デプロイが完了しました！</p><h2>まとめ</h2><p>gitにはsubtreeという機能がある<br>でも<code>.gitignore</code>が優先されてしまう<br><a href=https://github.com/tschaub/gh-pages rel=noopener target=_blank>gh-pages</a>が超便利！</p>"},prev:{title:"React StaticでTypeScriptを使用した時のエラー対処法",slug:"webpacks-rules-in-static-config-js"},next:{title:"ブログで使用した技術",slug:"use-technology"}}}</script><script src=/bundle.jk550k1p.js></script></body></html>