<!DOCTYPE html><html lang="ja-JP"><head><title data-react-helmet="true">GitHub PagesのUser Pageにdistフォルダをデプロイする - SANDBOX</title><link rel="preload" as="script" href="/bootstrap.c1ab9d46.js"/><link rel="preload" as="script" href="/templates/src/containers/Post.88c4349b.js"/><link rel="preload" as="script" href="/main.6623f299.js"/><link rel="preload" as="style" href="/styles.16e88065.css"/><link rel="stylesheet" href="/styles.16e88065.css"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/></head><body><div id="root"><div data-reactroot=""><header class="Header"><h1 class="Header-title"><a href="/">SANDBOX</a></h1></header><div class="content"><article><span>2018-07-02</span><h1>GitHub PagesのUser Pageにdistフォルダをデプロイする</h1><ul class="PostTags"><li class="PostTags-li"><a class="PostTags-Link" href="/tags/GitHubPages">GitHubPages</a> </li></ul><h2 id="user-page-master-">User Pageにはmasterブランチしか指定できない</h2>
<p>みたいです。<br/>しかもルート指定もできないようです。</p>
<p>GitHubは今までProject Pageしか使っていなかったので、<code>gh-pages</code>ブランチを指定できず焦りました。<br/>というわけでググります。</p>
<h2 id="-master-">どうやらmasterを殺せばいいらしい</h2>
<p>このQiitaの記事を参考に作業していきます。</p>
<p><a href="https://qiita.com/kwappa/items/03ffdeb89039a7249619">GitHub PagesのUser Pagesでドキュメントルートを変更するにはmasterを殺す</a></p>
<p><code>master</code>ブランチを削除して、指定フォルダをsubtreeとしてpushするらしいです。</p>
<p>手順通りに作業し、残るはpushのみ…</p>
<pre><code class="lang-sh">$ git subtree push --prefix dist/ origin master
git push using:  origin master
No new revisions were found
</code></pre>
<p>はい、うまくいかず！<br/><code>master</code>ブランチは追加されませんでした。</p>
<p><code>No new revisions were found</code>を読むと、更新ファイルが無いとのことらしいです。<code>dist</code>フォルダを<code>.gitignore</code>しているのが原因でしょう。</p>
<h2 id="gh-pages-">gh-pagesに頼る</h2>
<p><code>dist</code>フォルダを開発のgit管理に入れたくないし、だからと言ってデプロイのたびに<code>add -f</code>していくのは面倒です。<br/>なので、<a href="https://github.com/tschaub/gh-pages">gh-pages</a>で<code>master</code>にデプロイできるか試してみます。</p>
<p>調べてみると、どうやらブランチを指定するオプションは<code>-b</code>(<code>--branch</code>)のようです。<br/>実は<code>gh-pages</code>ブランチにpushした時はこれを使ったんですけど、subtreeをpushする方法を調べた時にアンインストールしてしまっていたんですね。<br/>再インストールして、以下のコマンドを叩きます。</p>
<pre><code class="lang-sh">$ npx gh-pages -d dist -b master
</code></pre>
<p>これで無事デプロイが完了しました！</p>
<h2 id="-">まとめ</h2>
<p>gitにはsubtreeという機能がある<br/>でも<code>.gitignore</code>が優先されてしまう<br/><a href="https://github.com/tschaub/gh-pages">gh-pages</a>が超便利！</p></article><div class="PostPager"><div class="PostPager-item"></div><div class="PostPager-item"><a class="active" aria-current="page" href="/">HOME</a></div><div class="PostPager-item"><a href="/blog/use-technology">ブログで使用した技術</a></div></div></div></div></div><script type="text/javascript">window.__CSS_CHUNKS__ = {"main":"/styles.16e88065.css"}</script><script type="text/javascript">
    window.__routeInfo = {"path":"blog/deploy-to-github-pages-user-page","templateID":2,"sharedPropsHashes":{},"localProps":null,"allProps":{"post":{"title":"GitHub PagesのUser Pageにdistフォルダをデプロイする","slug":"deploy-to-github-pages-user-page","tags":["GitHubPages"],"date":"2018-07-02","contents":"<h2 id=\"user-page-master-\">User Pageにはmasterブランチしか指定できない</h2>\n<p>みたいです。<br>しかもルート指定もできないようです。</p>\n<p>GitHubは今までProject Pageしか使っていなかったので、<code>gh-pages</code>ブランチを指定できず焦りました。<br>というわけでググります。</p>\n<h2 id=\"-master-\">どうやらmasterを殺せばいいらしい</h2>\n<p>このQiitaの記事を参考に作業していきます。</p>\n<p><a href=\"https://qiita.com/kwappa/items/03ffdeb89039a7249619\">GitHub PagesのUser Pagesでドキュメントルートを変更するにはmasterを殺す</a></p>\n<p><code>master</code>ブランチを削除して、指定フォルダをsubtreeとしてpushするらしいです。</p>\n<p>手順通りに作業し、残るはpushのみ…</p>\n<pre><code class=\"lang-sh\">$ git subtree push --prefix dist/ origin master\ngit push using:  origin master\nNo new revisions were found\n</code></pre>\n<p>はい、うまくいかず！<br><code>master</code>ブランチは追加されませんでした。</p>\n<p><code>No new revisions were found</code>を読むと、更新ファイルが無いとのことらしいです。<code>dist</code>フォルダを<code>.gitignore</code>しているのが原因でしょう。</p>\n<h2 id=\"gh-pages-\">gh-pagesに頼る</h2>\n<p><code>dist</code>フォルダを開発のgit管理に入れたくないし、だからと言ってデプロイのたびに<code>add -f</code>していくのは面倒です。<br>なので、<a href=\"https://github.com/tschaub/gh-pages\">gh-pages</a>で<code>master</code>にデプロイできるか試してみます。</p>\n<p>調べてみると、どうやらブランチを指定するオプションは<code>-b</code>(<code>--branch</code>)のようです。<br>実は<code>gh-pages</code>ブランチにpushした時はこれを使ったんですけど、subtreeをpushする方法を調べた時にアンインストールしてしまっていたんですね。<br>再インストールして、以下のコマンドを叩きます。</p>\n<pre><code class=\"lang-sh\">$ npx gh-pages -d dist -b master\n</code></pre>\n<p>これで無事デプロイが完了しました！</p>\n<h2 id=\"-\">まとめ</h2>\n<p>gitにはsubtreeという機能がある<br>でも<code>.gitignore</code>が優先されてしまう<br><a href=\"https://github.com/tschaub/gh-pages\">gh-pages</a>が超便利！</p>\n"},"next":{"title":"ブログで使用した技術","slug":"use-technology"}},"siteData":{"title":"React Static"}};</script><script defer="" type="text/javascript" src="/bootstrap.c1ab9d46.js"></script><script defer="" type="text/javascript" src="/templates/src/containers/Post.88c4349b.js"></script><script defer="" type="text/javascript" src="/main.6623f299.js"></script></body></html>