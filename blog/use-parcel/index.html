<!DOCTYPE html><html lang="ja"><head><meta name="viewport" content="width=device-width" /><meta charSet="utf-8" /><title>ブログ開発をParcelに変更した | Tech SANDBOX</title><meta name="description" content="前回の記事でparcelを使用して便利だったので、このブログのモジュールバンドラをparcelに変更した。決め手は、Tree Shakingがサポートされていたから。" /><meta property="og:title" content="ブログ開発をParcelに変更した" /><meta property="og:description" content="前回の記事でparcelを使用して便利だったので、このブログのモジュールバンドラをparcelに変更した。決め手は、Tree Shakingがサポートされていたから。" /><meta property="og:type" content="article" /><meta property="og:url" content="https://imasanari.github.io/blog/use-parcel/" /><meta property="og:image" content="https://imasanari.github.io/images/icon.jpg" /><meta property="og:site_name" content="Tech SANDBOX" /><meta name="twitter:card" content="summary" /><meta name="next-head-count" content="11" /><meta charSet="utf-8" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-74494516-4"></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-74494516-4', {
  page_path: window.location.pathname,
});
</script><meta name="google-site-verification" content="UmWq3FQLg72H6H0Tlk-SFR9f0bSBsvC8nDmxtK3-qMc" /><meta name="next-font-preconnect" /><link rel="amphtml" href="/blog/use-parcel.amp" /><noscript data-n-css></noscript><script defer noModule src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-676b634df3a2e97f.js" defer></script><script src="/_next/static/chunks/framework-e76b485c20171e26.js" defer></script><script src="/_next/static/chunks/main-a60c79ca4c9e4a78.js" defer></script><script src="/_next/static/chunks/pages/_app-0bbb6f652fb88496.js" defer></script><script src="/_next/static/chunks/308-8e43d561a1166d21.js" defer></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-80cbff6699981211.js" defer></script><script src="/_next/static/Gve2BknyuSzfI_yPPf3tt/_buildManifest.js" defer></script><script src="/_next/static/Gve2BknyuSzfI_yPPf3tt/_ssgManifest.js" defer></script><script src="/_next/static/Gve2BknyuSzfI_yPPf3tt/_middlewareManifest.js" defer></script><style data-emotion="c-global 15yblv4">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><style data-emotion="c 1j2cbpl g7fid7 1ff36h2 1x6wkub 1qeofn3 wb6uyc rntpfg up73zk zjuml4 1dmadst vubbuv 191lty2 1qsxih2 1yjvs5a 1n6wxgb 1qh3bxa 16n8wpk 1ihubty 1772xtw 1bbvdb4 chkhw5 y25xid x8nsji 5ck7xs 1lky7cb 1ugattu 35e4su cbw5c6 14rm9aa vlahzl 1yipi07 1k33q06 12ogyw6 1aue7hj nkh4ut q1nw06 1hdf6gm 1hbvs7c ze4krk 1jnynlu v5al3 116qoqd 9txlqf 1d3ah2d fnf71d 1j6il5h">.c-1j2cbpl{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;box-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:fixed;z-index:1100;top:0;left:auto;right:0;background-color:#f5f5f5;color:rgba(0, 0, 0, 0.87);}@media print{.c-1j2cbpl{position:absolute;}}.c-g7fid7{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;display:block;padding-left:16px;padding-right:16px;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:56px;}@media (min-width:600px){.c-g7fid7{padding-left:24px;padding-right:24px;}}@media (min-width:1200px){.c-g7fid7{max-width:1200px;}}@media (min-width:0px) and (orientation: landscape){.c-g7fid7{min-height:48px;}}@media (min-width:600px){.c-g7fid7{min-height:64px;}}.c-1ff36h2{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}.c-1x6wkub{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1.25rem;line-height:1.6;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.c-1qeofn3{margin:0;color:inherit;-webkit-text-decoration:none;text-decoration:none;}.c-wb6uyc{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:0.875rem;line-height:1.43;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}@media (min-width:0px){.c-rntpfg{display:none;}}@media (min-width:600px){.c-rntpfg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.c-up73zk{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:inherit;margin-left:24px;-webkit-text-decoration:underline;text-decoration:underline;}.c-up73zk:hover{text-decoration-color:inherit;}@media (min-width:0px){.c-zjuml4{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media (min-width:600px){.c-zjuml4{display:none;}}.c-1dmadst{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;margin-right:-12px;color:inherit;padding:12px;font-size:1.75rem;}.c-1dmadst::-moz-focus-inner{border-style:none;}.c-1dmadst.Mui-disabled{pointer-events:none;cursor:default;}@media print{.c-1dmadst{-webkit-print-color-adjust:exact;color-adjust:exact;}}.c-1dmadst:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.c-1dmadst:hover{background-color:transparent;}}.c-1dmadst.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}.c-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}.c-191lty2{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:16px;padding-right:16px;min-height:56px;}@media (min-width:600px){.c-191lty2{padding-left:24px;padding-right:24px;}}@media (min-width:0px) and (orientation: landscape){.c-191lty2{min-height:48px;}}@media (min-width:600px){.c-191lty2{min-height:64px;}}.c-1qsxih2{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;display:block;padding-left:16px;padding-right:16px;}@media (min-width:600px){.c-1qsxih2{padding-left:24px;padding-right:24px;}}@media (min-width:1200px){.c-1qsxih2{max-width:1200px;}}.c-1yjvs5a{margin-bottom:32px;}.c-1n6wxgb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:8px 0px;}.c-1qh3bxa{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.25rem;margin-right:4px;}.c-16n8wpk{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:0.875rem;line-height:1.43;}.c-1ihubty{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1.5rem;line-height:1.334;margin-bottom:0.35em;}.c-1772xtw{padding:0;margin:0;}.c-1bbvdb4{display:inline;padding:0;margin:0;}.c-chkhw5{margin:0;color:rgba(0, 0, 0, 0.6);-webkit-text-decoration:none;text-decoration:none;}.c-chkhw5:hover{-webkit-text-decoration:underline;text-decoration:underline;}.c-y25xid{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;margin-top:16px;margin-bottom:16px;text-align:justify;white-space:pre-line;}.c-x8nsji{margin:0;color:#1976d2;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(25, 118, 210, 0.4);}.c-x8nsji:hover{text-decoration-color:inherit;}.c-5ck7xs{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;margin-top:16px;margin-bottom:16px;}.c-5ck7xs .c-5ck7xs{margin-top:0;margin-bottom:0;}.c-1lky7cb{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;}.c-1ugattu{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:2.125rem;line-height:1.235;margin-top:32px;margin-bottom:32px;border-bottom:1px solid currentcolor;}.c-35e4su{padding:4px 8px;border-radius:4px;background-color:#1e1e1e;color:#d4d4d4;font-family:"SFMono-Regular",Consolas,Menlo,Courier,monospace,monospace;font-size:0.9em;}pre>.c-35e4su{padding:0;background-color:transparent;}.c-cbw5c6{padding:4px 8px;border-radius:4px;background-color:#1e1e1e;color:#d4d4d4;font-family:"SFMono-Regular",Consolas,Menlo,Courier,monospace,monospace;font-size:0.9em;word-break:break-all;}pre>.c-cbw5c6{padding:0;background-color:transparent;}.c-14rm9aa{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border-radius:4px;box-shadow:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);margin-top:16px;margin-bottom:16px;}.c-vlahzl{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:4px 32px;border-top-right-radius:5px;border-top-left-radius:5px;background-color:#555;color:white;}.c-1yipi07{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:5px;font-size:1.125rem;color:white;}.c-1yipi07::-moz-focus-inner{border-style:none;}.c-1yipi07.Mui-disabled{pointer-events:none;cursor:default;}@media print{.c-1yipi07{-webkit-print-color-adjust:exact;color-adjust:exact;}}.c-1yipi07:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.c-1yipi07:hover{background-color:transparent;}}.c-1yipi07.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}.c-1k33q06{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.25rem;}.c-12ogyw6{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;overflow:auto;padding:8px 32px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;}.c-1aue7hj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0;margin:32px 0px;}.c-nkh4ut{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 16px;margin:0;-webkit-flex:1;-ms-flex:1;flex:1;padding-left:0;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;}.c-q1nw06{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;color:#1976d2;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(25, 118, 210, 0.4);}.c-q1nw06:hover{text-decoration-color:inherit;}.c-1hdf6gm{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 16px;margin:0;border-left:1px solid #6c6c6c;border-right:1px solid #6c6c6c;}.c-1hbvs7c{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 16px;margin:0;-webkit-flex:1;-ms-flex:1;flex:1;padding-right:0;}.c-ze4krk{margin:32px auto;}.c-1jnynlu{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1.5rem;line-height:1.334;}.c-v5al3{list-style:none;padding:0;margin:0;}.c-116qoqd{padding:16px 24px;margin:16px 0px;border:1px solid #bbb;}.c-9txlqf{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.25rem;margin-left:16px;margin-right:4px;}.c-1d3ah2d{text-align:center;margin:32px 0px;}.c-fnf71d{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;margin-bottom:0.35em;}.c-1j6il5h{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:0.875rem;line-height:1.43;color:#1976d2;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(25, 118, 210, 0.4);}.c-1j6il5h:hover{text-decoration-color:inherit;}</style></head><body><div id="__next"><header amp-fx="float-in-top" class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation1 MuiAppBar-root MuiAppBar-colorDefault MuiAppBar-positionFixed mui-fixed c-1j2cbpl"><div class="MuiContainer-root MuiContainer-maxWidthLg MuiToolbar-root MuiToolbar-regular c-g7fid7"><div class="c-1ff36h2"><div class="MuiTypography-root MuiTypography-h6 MuiTypography-noWrap c-1x6wkub"><a href="/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineNone c-1qeofn3">Tech SANDBOX</a></div><p class="MuiTypography-root MuiTypography-body2 MuiTypography-noWrap c-wb6uyc">技術ブログ改め、Qiitaの下書き</p></div><nav class="MuiBox-root c-rntpfg"><a href="/" class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineAlways c-up73zk">Blog</a><a href="https://github.com/iMasanari" target="_blank" rel="noopener" class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineAlways c-up73zk">GitHub</a><a href="https://qiita.com/iMasanari" target="_blank" rel="noopener" class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineAlways c-up73zk">Qiita</a></nav><div class="MuiBox-root c-zjuml4"><button tabIndex="0" type="button" aria-label="menu" class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit MuiIconButton-edgeEnd MuiIconButton-sizeLarge c-1dmadst"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="MenuIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium c-vubbuv"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button></div></div></header><div class="MuiToolbar-root MuiToolbar-gutters MuiToolbar-regular c-191lty2"></div><div class="MuiContainer-root MuiContainer-maxWidthLg c-1qsxih2"><article><div class="MuiBox-root c-1yjvs5a"><header><div class="c-1n6wxgb"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CalendarTodayIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1qh3bxa"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path></svg><time dateTime="2019-04-26T13:55:56.097Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2019-04-26</time></div><h1 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom c-1ihubty">ブログ開発をParcelに変更した</h1><ul class="c-1772xtw"> <li class="c-1bbvdb4"><a href="/tags/parcel/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#parcel</a></li> <li class="c-1bbvdb4"><a href="/tags/blog/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#blog</a></li></ul></header></div><main><p class="MuiTypography-root MuiTypography-body1 c-y25xid"><a href="/blog/wasm-bindgen-with-worker/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-x8nsji">前回の記事</a>でparcelを使用して便利だったので、このブログのモジュールバンドラをparcelに変更した。</p>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">理由は以下の2つ。</p>
<ul class="MuiTypography-root MuiTypography-body1 c-5ck7xs">
<li class="MuiTypography-root MuiTypography-body1 c-1lky7cb">フラットなコンパイルが（実験的に）サポートされていたから</li>
<li class="MuiTypography-root MuiTypography-body1 c-1lky7cb">ビルドスクリプトの見直し（分割化）</li>
</ul>
<h2 class="MuiTypography-root MuiTypography-h4 c-1ugattu">フラットなコンパイル</h2>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">Tree Shakingがサポートされていたため。<code class="c-35e4su">--experimental-scope-hoisting</code>で有効にできる。
しかも普段使っているrollup.jsと同じ、フラットなコンパイルである。</p>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">というのも、今までのバンドルでは各ファイルのスコープを保つため、それぞれのファイルを<code class="c-cbw5c6">function</code>で囲っていた。</p>
<div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation4 c-14rm9aa"><div class="c-vlahzl"><span class="MuiTypography-root MuiTypography-body1 c-1lky7cb"></span><button tabIndex="0" type="button" aria-label="copy" class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall c-1yipi07"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ContentCopyIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1k33q06"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button></div><pre style="background-color: #1E1E1E;" class="MuiTypography-root MuiTypography-body1 shiki c-12ogyw6"><code class="c-35e4su"><span class="line"><span style="color: #6A9955;">// フラットでないバンドル結果のイメージ</span></span>
<span class="line"><span style="color: #D4D4D4;">(</span><span style="color: #569CD6;">function</span><span style="color: #D4D4D4;">(){</span></span>
<span class="line"><span style="color: #D4D4D4;">  </span><span style="color: #6A9955;">// boostrap code</span></span>
<span class="line"><span style="color: #D4D4D4;">  </span><span style="color: #6A9955;">// ...</span></span>
<span class="line"><span style="color: #D4D4D4;">})({</span></span>
<span class="line"><span style="color: #D4D4D4;">  </span><span style="color: #CE9178;">'module.js'</span><span style="color: #9CDCFE;">:</span><span style="color: #D4D4D4;"> </span><span style="color: #569CD6;">function</span><span style="color: #D4D4D4;"> (</span><span style="color: #9CDCFE;">export</span><span style="color: #D4D4D4;">, </span><span style="color: #9CDCFE;">require</span><span style="color: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: #D4D4D4;">    </span><span style="color: #569CD6;">const</span><span style="color: #D4D4D4;"> </span><span style="color: #DCDCAA;">add</span><span style="color: #D4D4D4;"> = (</span><span style="color: #9CDCFE;">a</span><span style="color: #D4D4D4;">, </span><span style="color: #9CDCFE;">b</span><span style="color: #D4D4D4;">) </span><span style="color: #569CD6;">=&gt;</span><span style="color: #D4D4D4;"> </span><span style="color: #9CDCFE;">a</span><span style="color: #D4D4D4;"> + </span><span style="color: #9CDCFE;">b</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4;">    </span><span style="color: #9CDCFE;">export</span><span style="color: #D4D4D4;">.</span><span style="color: #9CDCFE;">add</span><span style="color: #D4D4D4;"> = </span><span style="color: #9CDCFE;">add</span></span>
<span class="line"><span style="color: #D4D4D4;">  },</span></span>
<span class="line"><span style="color: #D4D4D4;">  </span><span style="color: #CE9178;">'main.js'</span><span style="color: #9CDCFE;">:</span><span style="color: #D4D4D4;"> </span><span style="color: #569CD6;">function</span><span style="color: #D4D4D4;"> (</span><span style="color: #9CDCFE;">export</span><span style="color: #D4D4D4;">, </span><span style="color: #9CDCFE;">require</span><span style="color: #D4D4D4;">) {</span></span>
<span class="line"><span style="color: #D4D4D4;">    </span><span style="color: #569CD6;">const</span><span style="color: #D4D4D4;"> </span><span style="color: #4FC1FF;">add</span><span style="color: #D4D4D4;"> = </span><span style="color: #DCDCAA;">require</span><span style="color: #D4D4D4;">(</span><span style="color: #CE9178;">'module.js'</span><span style="color: #D4D4D4;">).</span><span style="color: #9CDCFE;">add</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4;">    </span><span style="color: #569CD6;">const</span><span style="color: #D4D4D4;"> </span><span style="color: #4FC1FF;">result</span><span style="color: #D4D4D4;"> = </span><span style="color: #DCDCAA;">add</span><span style="color: #D4D4D4;">(</span><span style="color: #B5CEA8;">1</span><span style="color: #D4D4D4;">, </span><span style="color: #B5CEA8;">2</span><span style="color: #D4D4D4;">)</span></span>
<span class="line"><span style="color: #D4D4D4;">    </span><span style="color: #9CDCFE;">console</span><span style="color: #D4D4D4;">.</span><span style="color: #DCDCAA;">log</span><span style="color: #D4D4D4;">(</span><span style="color: #9CDCFE;">result</span><span style="color: #D4D4D4;">)</span></span>
<span class="line"><span style="color: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: #D4D4D4;">});</span></span></code></pre></div>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">それが、こうなる。</p>
<div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation4 c-14rm9aa"><div class="c-vlahzl"><span class="MuiTypography-root MuiTypography-body1 c-1lky7cb"></span><button tabIndex="0" type="button" aria-label="copy" class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall c-1yipi07"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ContentCopyIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1k33q06"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button></div><pre style="background-color: #1E1E1E;" class="MuiTypography-root MuiTypography-body1 shiki c-12ogyw6"><code class="c-35e4su"><span class="line"><span style="color: #6A9955;">// フラットなバンドル結果のイメージ</span></span>
<span class="line"><span style="color: #D4D4D4;">(</span><span style="color: #569CD6;">function</span><span style="color: #D4D4D4;">() {</span></span>
<span class="line"><span style="color: #D4D4D4;">  </span><span style="color: #6A9955;">// module.js</span></span>
<span class="line"><span style="color: #D4D4D4;">  </span><span style="color: #569CD6;">const</span><span style="color: #D4D4D4;"> </span><span style="color: #DCDCAA;">add</span><span style="color: #D4D4D4;"> = (</span><span style="color: #9CDCFE;">a</span><span style="color: #D4D4D4;">, </span><span style="color: #9CDCFE;">b</span><span style="color: #D4D4D4;">) </span><span style="color: #569CD6;">=&gt;</span><span style="color: #D4D4D4;"> </span><span style="color: #9CDCFE;">a</span><span style="color: #D4D4D4;"> + </span><span style="color: #9CDCFE;">b</span></span>
<span class="line"><span style="color: #D4D4D4;">  </span><span style="color: #6A9955;">// main.js</span></span>
<span class="line"><span style="color: #D4D4D4;">  </span><span style="color: #569CD6;">const</span><span style="color: #D4D4D4;"> </span><span style="color: #4FC1FF;">result</span><span style="color: #D4D4D4;"> = </span><span style="color: #DCDCAA;">add</span><span style="color: #D4D4D4;">(</span><span style="color: #B5CEA8;">1</span><span style="color: #D4D4D4;">, </span><span style="color: #B5CEA8;">2</span><span style="color: #D4D4D4;">)</span></span>
<span class="line"><span style="color: #D4D4D4;">  </span><span style="color: #9CDCFE;">console</span><span style="color: #D4D4D4;">.</span><span style="color: #DCDCAA;">log</span><span style="color: #D4D4D4;">(</span><span style="color: #9CDCFE;">result</span><span style="color: #D4D4D4;">)</span></span>
<span class="line"><span style="color: #D4D4D4;">})();</span></span></code></pre></div>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">各ファイルのfunctionスコープがなくなり、バンドル結果がコンパクトになっているのがわかる。もしトップレベルの変数名が他ファイルの変数と被っても自動でリネームしてくれる。
ただ、オプション名の「experimental」からわかるように実験的なサポートのため、特殊なことを行おうとするとうまくビルドされない可能性がある。前回の記事の<a href="/blog/wasm-bindgen-with-worker/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-x8nsji">WebAssembly</a>ではできなかった。</p>
<h2 class="MuiTypography-root MuiTypography-h4 c-1ugattu">ビルドスクリプトの見直し（分割化）</h2>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">変更前では、ビルドスクリプトが1本だったので記事をプレビューする場合でもプログラム全体をコンパイルする必要があった。</p>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">現在は、記事のビルド（ts-node）とプログラムのビルド（parcel）を分離して記事単独でビルドできるようにした。また、watchビルドに対応し、コマンドを叩く必要がなくなった。</p>
<h2 class="MuiTypography-root MuiTypography-h4 c-1ugattu">今後</h2>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">rollup.jsでは非対応だったDynamic Importで記事fetchをしてみたい。そうすると、React Suspence使ってみたいからReactに書き換えるかもしれない。</p></main></article><ul class="c-1aue7hj"><li class="c-nkh4ut"><a href="/blog/wasm-bindgen-with-worker/" class="MuiTypography-root MuiTypography-body1 MuiLink-root MuiLink-underlineAlways c-q1nw06">Rust + wasm-bindgen + WebWorkerの環境構築</a></li><li class="c-1hdf6gm"><a href="/" class="MuiTypography-root MuiTypography-body1 MuiLink-root MuiLink-underlineAlways c-q1nw06">HOME</a></li><li class="c-1hbvs7c"><a href="/blog/use-next/" class="MuiTypography-root MuiTypography-body1 MuiLink-root MuiLink-underlineAlways c-q1nw06">ブログをNext.jsベースに変更した</a></li></ul><aside class="c-ze4krk"><header><h1 class="MuiTypography-root MuiTypography-h5 c-1jnynlu">同じタグを含む記事</h1><ul class="c-1772xtw"> <li class="c-1bbvdb4"><a href="/tags/parcel/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#parcel</a></li> <li class="c-1bbvdb4"><a href="/tags/blog/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#blog</a></li></ul></header><main><ul class="c-v5al3"><li class="c-116qoqd"><article><header><div class="c-1n6wxgb"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CalendarTodayIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1qh3bxa"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path></svg><time dateTime="2020-11-28T08:05:18.607Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2020-11-28</time></div><h1 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom c-1ihubty"><a href="/blog/use-amp/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-x8nsji">ブログをAMP対応（仮）しました</a></h1><ul class="c-1772xtw"> <li class="c-1bbvdb4"><a href="/tags/AMP/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#AMP</a></li> <li class="c-1bbvdb4"><a href="/tags/Next.js" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#Next.js</a></li> <li class="c-1bbvdb4"><a href="/tags/blog/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#blog</a></li></ul></header></article></li><li class="c-116qoqd"><article><header><div class="c-1n6wxgb"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CalendarTodayIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1qh3bxa"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path></svg><time dateTime="2020-09-20T06:33:49.199Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2020-09-20</time></div><h1 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom c-1ihubty"><a href="/blog/use-next/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-x8nsji">ブログをNext.jsベースに変更した</a></h1><ul class="c-1772xtw"> <li class="c-1bbvdb4"><a href="/tags/React/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#React</a></li> <li class="c-1bbvdb4"><a href="/tags/Next.js" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#Next.js</a></li> <li class="c-1bbvdb4"><a href="/tags/blog/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#blog</a></li></ul></header></article></li><li class="c-116qoqd"><article><header><div class="c-1n6wxgb"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CalendarTodayIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1qh3bxa"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path></svg><time dateTime="2018-12-20T14:58:37.388Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2018-12-20</time><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="SyncIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-9txlqf"><path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"></path></svg><time dateTime="2019-04-20T13:15:27.878Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2019-04-20</time></div><h1 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom c-1ihubty"><a href="/blog/wasm-bindgen-with-worker/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-x8nsji">Rust + wasm-bindgen + WebWorkerの環境構築</a></h1><ul class="c-1772xtw"> <li class="c-1bbvdb4"><a href="/tags/Rust/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#Rust</a></li> <li class="c-1bbvdb4"><a href="/tags/wasm-bindgen/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#wasm-bindgen</a></li> <li class="c-1bbvdb4"><a href="/tags/TypeScript/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#TypeScript</a></li> <li class="c-1bbvdb4"><a href="/tags/parcel/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#parcel</a></li></ul></header></article></li></ul></main></aside></div><footer class="c-1d3ah2d"><div class="MuiContainer-root MuiContainer-maxWidthLg c-1qsxih2"><p class="MuiTypography-root MuiTypography-body1 MuiTypography-gutterBottom c-fnf71d">Author: <a href="https://github.com/iMasanari" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-x8nsji">iMasanari</a></p><a href="https://github.com/iMasanari/imasanari.github.io/" class="MuiTypography-root MuiTypography-body2 MuiLink-root MuiLink-underlineAlways c-1j6il5h">Show on GitHub</a></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"ブログ開発をParcelに変更した","description":"前回の記事でparcelを使用して便利だったので、このブログのモジュールバンドラをparcelに変更した。決め手は、Tree Shakingがサポートされていたから。","slug":"use-parcel","tags":["parcel","blog"],"date":"2019-04-26T13:55:56.097Z","update":null,"image":null,"draft":false},"next":{"title":"ブログをNext.jsベースに変更した","description":"","slug":"use-next","tags":["React","Next.js","blog"],"date":"2020-09-20T06:33:49.199Z","update":null,"image":null,"draft":false},"prev":{"title":"Rust + wasm-bindgen + WebWorkerの環境構築","description":"WebAssembly Advent Calendar 2018の20日目の記事。","slug":"wasm-bindgen-with-worker","tags":["Rust","wasm-bindgen","TypeScript","parcel"],"date":"2018-12-20T14:58:37.388Z","update":"2019-04-20T13:15:27.878Z","image":null,"draft":false},"sameTags":[{"title":"ブログをAMP対応（仮）しました","description":"実質、各ページに `export const config = { amp: 'hybrid' }` を追加しただけ。next.js超ラク。","slug":"use-amp","tags":["AMP","Next.js","blog"],"date":"2020-11-28T08:05:18.607Z","update":null,"image":null,"draft":false},{"title":"ブログをNext.jsベースに変更した","description":"","slug":"use-next","tags":["React","Next.js","blog"],"date":"2020-09-20T06:33:49.199Z","update":null,"image":null,"draft":false},{"title":"Rust + wasm-bindgen + WebWorkerの環境構築","description":"WebAssembly Advent Calendar 2018の20日目の記事。","slug":"wasm-bindgen-with-worker","tags":["Rust","wasm-bindgen","TypeScript","parcel"],"date":"2018-12-20T14:58:37.388Z","update":"2019-04-20T13:15:27.878Z","image":null,"draft":false}],"content":"\u003cp\u003e\u003ca href=\"/blog/wasm-bindgen-with-worker/\"\u003e前回の記事\u003c/a\u003eでparcelを使用して便利だったので、このブログのモジュールバンドラをparcelに変更した。\u003c/p\u003e\n\u003cp\u003e理由は以下の2つ。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eフラットなコンパイルが（実験的に）サポートされていたから\u003c/li\u003e\n\u003cli\u003eビルドスクリプトの見直し（分割化）\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eフラットなコンパイル\u003c/h2\u003e\n\u003cp\u003eTree Shakingがサポートされていたため。\u003ccode\u003e--experimental-scope-hoisting\u003c/code\u003eで有効にできる。\nしかも普段使っているrollup.jsと同じ、フラットなコンパイルである。\u003c/p\u003e\n\u003cp\u003eというのも、今までのバンドルでは各ファイルのスコープを保つため、それぞれのファイルを\u003ccode\u003efunction\u003c/code\u003eで囲っていた。\u003c/p\u003e\n\u003capp-code-wrapper lang=\"js\" code=\"// フラットでないバンドル結果のイメージ\n(function(){\n  // boostrap code\n  // ...\n})({\n  \u0026#x27;module.js\u0026#x27;: function (export, require) {\n    const add = (a, b) =\u003e a + b\n\n    export.add = add\n  },\n  \u0026#x27;main.js\u0026#x27;: function (export, require) {\n    const add = require(\u0026#x27;module.js\u0026#x27;).add\n\n    const result = add(1, 2)\n    console.log(result)\n  }\n});\"\u003e\u003cpre class=\"shiki\" style=\"background-color: #1E1E1E\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A9955\"\u003e// フラットでないバンドル結果のイメージ\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #569CD6\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e(){\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #6A9955\"\u003e// boostrap code\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #6A9955\"\u003e// ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e})({\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #CE9178\"\u003e\u0026#39;module.js\u0026#39;\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #569CD6\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003erequire\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #569CD6\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #DCDCAA\"\u003eadd\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e = (\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eb\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #569CD6\"\u003e=\u0026gt;\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e + \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eb\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eadd\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e = \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eadd\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #CE9178\"\u003e\u0026#39;main.js\u0026#39;\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #569CD6\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003erequire\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #569CD6\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #4FC1FF\"\u003eadd\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e = \u003c/span\u003e\u003cspan style=\"color: #DCDCAA\"\u003erequire\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CE9178\"\u003e\u0026#39;module.js\u0026#39;\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e).\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eadd\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #569CD6\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #4FC1FF\"\u003eresult\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e = \u003c/span\u003e\u003cspan style=\"color: #DCDCAA\"\u003eadd\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #B5CEA8\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #B5CEA8\"\u003e2\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #DCDCAA\"\u003elog\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eresult\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e});\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/app-code-wrapper\u003e\n\u003cp\u003eそれが、こうなる。\u003c/p\u003e\n\u003capp-code-wrapper lang=\"js\" code=\"// フラットなバンドル結果のイメージ\n(function() {\n  // module.js\n  const add = (a, b) =\u003e a + b\n  // main.js\n  const result = add(1, 2)\n  console.log(result)\n})();\"\u003e\u003cpre class=\"shiki\" style=\"background-color: #1E1E1E\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A9955\"\u003e// フラットなバンドル結果のイメージ\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #569CD6\"\u003efunction\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #6A9955\"\u003e// module.js\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #569CD6\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #DCDCAA\"\u003eadd\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e = (\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eb\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e) \u003c/span\u003e\u003cspan style=\"color: #569CD6\"\u003e=\u0026gt;\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003ea\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e + \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eb\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #6A9955\"\u003e// main.js\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #569CD6\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #4FC1FF\"\u003eresult\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e = \u003c/span\u003e\u003cspan style=\"color: #DCDCAA\"\u003eadd\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #B5CEA8\"\u003e1\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #B5CEA8\"\u003e2\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003econsole\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #DCDCAA\"\u003elog\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eresult\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e})();\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/app-code-wrapper\u003e\n\u003cp\u003e各ファイルのfunctionスコープがなくなり、バンドル結果がコンパクトになっているのがわかる。もしトップレベルの変数名が他ファイルの変数と被っても自動でリネームしてくれる。\nただ、オプション名の「experimental」からわかるように実験的なサポートのため、特殊なことを行おうとするとうまくビルドされない可能性がある。前回の記事の\u003ca href=\"/blog/wasm-bindgen-with-worker/\"\u003eWebAssembly\u003c/a\u003eではできなかった。\u003c/p\u003e\n\u003ch2\u003eビルドスクリプトの見直し（分割化）\u003c/h2\u003e\n\u003cp\u003e変更前では、ビルドスクリプトが1本だったので記事をプレビューする場合でもプログラム全体をコンパイルする必要があった。\u003c/p\u003e\n\u003cp\u003e現在は、記事のビルド（ts-node）とプログラムのビルド（parcel）を分離して記事単独でビルドできるようにした。また、watchビルドに対応し、コマンドを叩く必要がなくなった。\u003c/p\u003e\n\u003ch2\u003e今後\u003c/h2\u003e\n\u003cp\u003erollup.jsでは非対応だったDynamic Importで記事fetchをしてみたい。そうすると、React Suspence使ってみたいからReactに書き換えるかもしれない。\u003c/p\u003e"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"use-parcel"},"buildId":"Gve2BknyuSzfI_yPPf3tt","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>