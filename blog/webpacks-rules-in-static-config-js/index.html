<!DOCTYPE html><html lang="ja"><head><meta name="viewport" content="width=device-width" /><meta charSet="utf-8" /><title>React StaticでTypeScriptを使用した時のエラー対処法 | Tech SANDBOX</title><meta name="description" content="static.config.jsのwebpack設定を変更することで起こるエラーの対処法。" /><meta property="og:title" content="React StaticでTypeScriptを使用した時のエラー対処法" /><meta property="og:description" content="static.config.jsのwebpack設定を変更することで起こるエラーの対処法。" /><meta property="og:type" content="article" /><meta property="og:url" content="https://imasanari.github.io/blog/webpacks-rules-in-static-config-js/" /><meta property="og:image" content="https://imasanari.github.io/images/icon.jpg" /><meta property="og:site_name" content="Tech SANDBOX" /><meta name="twitter:card" content="summary" /><meta name="next-head-count" content="11" /><meta charSet="utf-8" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-74494516-4"></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-74494516-4', {
  page_path: window.location.pathname,
});
</script><meta name="google-site-verification" content="UmWq3FQLg72H6H0Tlk-SFR9f0bSBsvC8nDmxtK3-qMc" /><meta name="next-font-preconnect" /><link rel="amphtml" href="/blog/webpacks-rules-in-static-config-js.amp" /><noscript data-n-css></noscript><script defer noModule src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer></script><script src="/_next/static/chunks/framework-e76b485c20171e26.js" defer></script><script src="/_next/static/chunks/main-483b248733d43f4e.js" defer></script><script src="/_next/static/chunks/pages/_app-47c52d4db6bdb59d.js" defer></script><script src="/_next/static/chunks/122-30dc8970eb917ad3.js" defer></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-3e67ba2fb90e7dff.js" defer></script><script src="/_next/static/1mq89Dz1R38xgNgBrWpSQ/_buildManifest.js" defer></script><script src="/_next/static/1mq89Dz1R38xgNgBrWpSQ/_ssgManifest.js" defer></script><script src="/_next/static/1mq89Dz1R38xgNgBrWpSQ/_middlewareManifest.js" defer></script><style data-emotion="c-global 15yblv4">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><style data-emotion="c 1kyvigp g7fid7 i9gxme 1x6wkub 1qeofn3 wb6uyc rntpfg up73zk zjuml4 1dmadst vubbuv 191lty2 1qsxih2 1yjvs5a 1n6wxgb 1qh3bxa 16n8wpk 1ihubty ntfpy7 1vaygba chkhw5 1ugattu ceho3e y25xid 14rm9aa vlahzl 1lky7cb 1yipi07 1k33q06 12ogyw6 1f8td17 1aue7hj 1sl6rns q1nw06 1bhrv1p mpp38z ze4krk 1jnynlu 1rvtlej 116qoqd 9txlqf x8nsji 1d3ah2d fnf71d 1j6il5h">.c-1kyvigp{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;box-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:fixed;z-index:1100;top:0;left:auto;right:0;background-color:#f5f5f5;color:rgba(0, 0, 0, 0.87);overflow:hidden;}@media print{.c-1kyvigp{position:absolute;}}.c-g7fid7{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;display:block;padding-left:16px;padding-right:16px;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:56px;}@media (min-width:600px){.c-g7fid7{padding-left:24px;padding-right:24px;}}@media (min-width:1200px){.c-g7fid7{max-width:1200px;}}@media (min-width:0px) and (orientation: landscape){.c-g7fid7{min-height:48px;}}@media (min-width:600px){.c-g7fid7{min-height:64px;}}.c-i9gxme{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}.c-1x6wkub{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1.25rem;line-height:1.6;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.c-1qeofn3{margin:0;color:inherit;-webkit-text-decoration:none;text-decoration:none;}.c-wb6uyc{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:0.875rem;line-height:1.43;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}@media (min-width:0px){.c-rntpfg{display:none;}}@media (min-width:600px){.c-rntpfg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.c-up73zk{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:inherit;margin-left:24px;-webkit-text-decoration:underline;text-decoration:underline;}.c-up73zk:hover{text-decoration-color:inherit;}@media (min-width:0px){.c-zjuml4{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media (min-width:600px){.c-zjuml4{display:none;}}.c-1dmadst{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;margin-right:-12px;color:inherit;padding:12px;font-size:1.75rem;}.c-1dmadst::-moz-focus-inner{border-style:none;}.c-1dmadst.Mui-disabled{pointer-events:none;cursor:default;}@media print{.c-1dmadst{-webkit-print-color-adjust:exact;color-adjust:exact;}}.c-1dmadst:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.c-1dmadst:hover{background-color:transparent;}}.c-1dmadst.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}.c-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}.c-191lty2{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:16px;padding-right:16px;min-height:56px;}@media (min-width:600px){.c-191lty2{padding-left:24px;padding-right:24px;}}@media (min-width:0px) and (orientation: landscape){.c-191lty2{min-height:48px;}}@media (min-width:600px){.c-191lty2{min-height:64px;}}.c-1qsxih2{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;display:block;padding-left:16px;padding-right:16px;}@media (min-width:600px){.c-1qsxih2{padding-left:24px;padding-right:24px;}}@media (min-width:1200px){.c-1qsxih2{max-width:1200px;}}.c-1yjvs5a{margin-bottom:32px;}.c-1n6wxgb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:8px 0px;}.c-1qh3bxa{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.25rem;margin-right:4px;}.c-16n8wpk{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:0.875rem;line-height:1.43;}.c-1ihubty{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1.5rem;line-height:1.334;margin-bottom:0.35em;}.c-ntfpy7{padding:0;margin:0;}.c-1vaygba{display:inline;padding:0;margin:0;}.c-chkhw5{margin:0;color:rgba(0, 0, 0, 0.6);-webkit-text-decoration:none;text-decoration:none;}.c-chkhw5:hover{-webkit-text-decoration:underline;text-decoration:underline;}.c-1ugattu{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:2.125rem;line-height:1.235;margin-top:32px;margin-bottom:32px;border-bottom:1px solid currentcolor;}.c-ceho3e{padding:4px 8px;border-radius:4px;background-color:#1e1e1e;color:#d4d4d4;font-family:"SFMono-Regular",Consolas,Menlo,Courier,monospace,monospace;font-size:0.9em;}pre>.c-ceho3e{padding:0;background-color:transparent;}.c-y25xid{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;margin-top:16px;margin-bottom:16px;text-align:justify;white-space:pre-line;}.c-14rm9aa{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border-radius:4px;box-shadow:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);margin-top:16px;margin-bottom:16px;}.c-vlahzl{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:4px 32px;border-top-right-radius:5px;border-top-left-radius:5px;background-color:#555;color:white;}.c-1lky7cb{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;}.c-1yipi07{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:5px;font-size:1.125rem;color:white;}.c-1yipi07::-moz-focus-inner{border-style:none;}.c-1yipi07.Mui-disabled{pointer-events:none;cursor:default;}@media print{.c-1yipi07{-webkit-print-color-adjust:exact;color-adjust:exact;}}.c-1yipi07:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.c-1yipi07:hover{background-color:transparent;}}.c-1yipi07.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}.c-1k33q06{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.25rem;}.c-12ogyw6{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;overflow:auto;padding:8px 32px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;}.c-1f8td17{padding:4px 8px;border-radius:4px;background-color:#1e1e1e;color:#d4d4d4;font-family:"SFMono-Regular",Consolas,Menlo,Courier,monospace,monospace;font-size:0.9em;word-break:break-all;}pre>.c-1f8td17{padding:0;background-color:transparent;}.c-1aue7hj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0;margin:32px 0px;}.c-1sl6rns{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 16px;margin:0;-webkit-flex:1;-ms-flex:1;flex:1;padding-left:0;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;}.c-q1nw06{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;color:#1976d2;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(25, 118, 210, 0.4);}.c-q1nw06:hover{text-decoration-color:inherit;}.c-1bhrv1p{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 16px;margin:0;border-left:1px solid #6c6c6c;border-right:1px solid #6c6c6c;}.c-mpp38z{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 16px;margin:0;-webkit-flex:1;-ms-flex:1;flex:1;padding-right:0;}.c-ze4krk{margin:32px auto;}.c-1jnynlu{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1.5rem;line-height:1.334;}.c-1rvtlej{list-style:none;padding:0;margin:0;}.c-116qoqd{padding:16px 24px;margin:16px 0px;border:1px solid #bbb;}.c-9txlqf{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.25rem;margin-left:16px;margin-right:4px;}.c-x8nsji{margin:0;color:#1976d2;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(25, 118, 210, 0.4);}.c-x8nsji:hover{text-decoration-color:inherit;}.c-1d3ah2d{text-align:center;margin:32px 0px;}.c-fnf71d{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;margin-bottom:0.35em;}.c-1j6il5h{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:0.875rem;line-height:1.43;color:#1976d2;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(25, 118, 210, 0.4);}.c-1j6il5h:hover{text-decoration-color:inherit;}</style></head><body><div id="__next"><header amp-fx="float-in-top" class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation1 MuiAppBar-root MuiAppBar-colorDefault MuiAppBar-positionFixed mui-fixed c-1kyvigp"><div class="MuiContainer-root MuiContainer-maxWidthLg MuiToolbar-root MuiToolbar-regular c-g7fid7"><div class="c-i9gxme"><div class="MuiTypography-root MuiTypography-h6 MuiTypography-noWrap c-1x6wkub"><a href="/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineNone c-1qeofn3">Tech SANDBOX</a></div><p class="MuiTypography-root MuiTypography-body2 MuiTypography-noWrap c-wb6uyc">技術ブログ改め、Qiitaの下書き</p></div><nav class="MuiBox-root c-rntpfg"><a href="/" class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineAlways c-up73zk">Blog</a><a href="https://github.com/iMasanari" target="_blank" rel="noopener" class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineAlways c-up73zk">GitHub</a><a href="https://qiita.com/iMasanari" target="_blank" rel="noopener" class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineAlways c-up73zk">Qiita</a></nav><div class="MuiBox-root c-zjuml4"><button tabIndex="0" type="button" aria-label="menu" class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit MuiIconButton-edgeEnd MuiIconButton-sizeLarge c-1dmadst"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="MenuIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium c-vubbuv"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button></div></div></header><div class="MuiToolbar-root MuiToolbar-gutters MuiToolbar-regular c-191lty2"></div><div class="MuiContainer-root MuiContainer-maxWidthLg c-1qsxih2"><article><div class="MuiBox-root c-1yjvs5a"><header><div class="c-1n6wxgb"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CalendarTodayIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1qh3bxa"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path></svg><time dateTime="2018-07-03T11:47:13.910Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2018-07-03</time></div><h1 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom c-1ihubty">React StaticでTypeScriptを使用した時のエラー対処法</h1><ul class="c-ntfpy7"> <li class="c-1vaygba"><a href="/tags/ReactStatic/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#ReactStatic</a></li> <li class="c-1vaygba"><a href="/tags/TypeScript/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#TypeScript</a></li> <li class="c-1vaygba"><a href="/tags/webpack/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#webpack</a></li></ul></header></div><main><h2 class="MuiTypography-root MuiTypography-h4 c-1ugattu">rulesを変更して<code class="c-ceho3e">npm run build</code>するとエラーに</h2>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">このブログはReact StaticのTypeScriptのexsampleがベースになっている。
サンプルは開発中（<code class="c-ceho3e">npm run start</code>）では問題はないが、プロダクションビルド（<code class="c-ceho3e">npm run build</code>）するとエラーになるのでその対処法をメモして置く。</p>
<div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation4 c-14rm9aa"><div class="c-vlahzl"><span class="MuiTypography-root MuiTypography-body1 c-1lky7cb"></span><button tabIndex="0" type="button" aria-label="copy" class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall c-1yipi07"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ContentCopyIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1k33q06"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button></div><pre style="background-color: #1E1E1E;" class="MuiTypography-root MuiTypography-body1 shiki c-12ogyw6"><code class="c-ceho3e"><span class="line"><span style="color: #D4D4D4;">$ npm run build</span></span>
<span class="line"><span style="color: #6A9955;"># ...</span></span>
<span class="line"><span style="color: #D4D4D4;">Error: Module build failed: Error: </span><span style="color: #CE9178;">&quot;extract-text-webpack-plugin&quot;</span><span style="color: #D4D4D4;"> loader is used </span></span>
<span class="line"><span style="color: #D4D4D4;">without the  corresponding plugin, refer to </span></span>
<span class="line"><span style="color: #D4D4D4;">https://github.com/webpack/extract-text-webpack-plugin </span><span style="color: #C586C0;">for</span><span style="color: #D4D4D4;"> th  e usage example</span></span></code></pre></div>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">サンプルの初期コードどころか、そもそも下記の設定で動かなかった。</p>
<div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation4 c-14rm9aa"><div class="c-vlahzl"><span class="MuiTypography-root MuiTypography-body1 c-1lky7cb">static.config.js</span><button tabIndex="0" type="button" aria-label="copy" class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall c-1yipi07"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ContentCopyIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1k33q06"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button></div><pre style="background-color: #1E1E1E;" class="MuiTypography-root MuiTypography-body1 shiki c-12ogyw6"><code class="c-ceho3e"><span class="line"><span style="color: #C586C0;">export</span><span style="color: #D4D4D4;"> </span><span style="color: #C586C0;">default</span><span style="color: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: #D4D4D4;">  </span><span style="color: #6A9955;">// ...</span></span>
<span class="line"><span style="color: #D4D4D4;">  </span><span style="color: #DCDCAA;">webpack</span><span style="color: #9CDCFE;">:</span><span style="color: #D4D4D4;"> (</span><span style="color: #9CDCFE;">config</span><span style="color: #D4D4D4;">, { </span><span style="color: #9CDCFE;">defaultLoaders</span><span style="color: #D4D4D4;"> }) </span><span style="color: #569CD6;">=&gt;</span><span style="color: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: #D4D4D4;">    </span><span style="color: #9CDCFE;">config</span><span style="color: #D4D4D4;">.</span><span style="color: #9CDCFE;">module</span><span style="color: #D4D4D4;">.</span><span style="color: #9CDCFE;">rules</span><span style="color: #D4D4D4;"> = [{</span></span>
<span class="line"><span style="color: #D4D4D4;">      </span><span style="color: #9CDCFE;">oneOf:</span><span style="color: #D4D4D4;"> [</span></span>
<span class="line"><span style="color: #D4D4D4;">        </span><span style="color: #6A9955;">// ↓tsの設定を無くしデフォルトのを使用するもエラー継続</span></span>
<span class="line"><span style="color: #D4D4D4;">        </span><span style="color: #9CDCFE;">defaultLoaders</span><span style="color: #D4D4D4;">.</span><span style="color: #9CDCFE;">jsLoader</span><span style="color: #D4D4D4;">,</span></span>
<span class="line"><span style="color: #D4D4D4;">        </span><span style="color: #9CDCFE;">defaultLoaders</span><span style="color: #D4D4D4;">.</span><span style="color: #9CDCFE;">cssLoader</span><span style="color: #D4D4D4;">,</span></span>
<span class="line"><span style="color: #D4D4D4;">        </span><span style="color: #9CDCFE;">defaultLoaders</span><span style="color: #D4D4D4;">.</span><span style="color: #9CDCFE;">fileLoader</span><span style="color: #D4D4D4;">,</span></span>
<span class="line"><span style="color: #D4D4D4;">      ],</span></span>
<span class="line"><span style="color: #D4D4D4;">    }]</span></span>
<span class="line"><span style="color: #D4D4D4;">    </span></span>
<span class="line"><span style="color: #D4D4D4;">    </span><span style="color: #C586C0;">return</span><span style="color: #D4D4D4;"> </span><span style="color: #9CDCFE;">config</span></span>
<span class="line"><span style="color: #D4D4D4;">  }</span></span>
<span class="line"><span style="color: #D4D4D4;">}</span></span></code></pre></div>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">デフォルトとは一体…</p>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid"><code class="c-1f8td17">config.module.rules</code>を変更しない場合は問題なくビルドすることができる。
<code class="c-1f8td17">defaultLoaders.cssLoader</code>が悪さをしているようだ。</p>
<h2 class="MuiTypography-root MuiTypography-h4 c-1ugattu">暫定的対処法</h2>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid"><code class="c-1f8td17">defaultLoaders.cssLoader</code>を使わず、既存のルールの先頭に追加したい処理を置く。
ルールは<code class="c-1f8td17">oneOf</code>で書かれているため、最初に一致するルールのみが使用される。先頭に追加することで、既存のルールは変更することなくマイルールを適用することができるのだ。</p>
<div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation4 c-14rm9aa"><div class="c-vlahzl"><span class="MuiTypography-root MuiTypography-body1 c-1lky7cb">static.config.js</span><button tabIndex="0" type="button" aria-label="copy" class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall c-1yipi07"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ContentCopyIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1k33q06"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button></div><pre style="background-color: #1E1E1E;" class="MuiTypography-root MuiTypography-body1 shiki c-12ogyw6"><code class="c-ceho3e"><span class="line"><span style="color: #C586C0;">export</span><span style="color: #D4D4D4;"> </span><span style="color: #C586C0;">default</span><span style="color: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: #D4D4D4;">  </span><span style="color: #6A9955;">// ...</span></span>
<span class="line"><span style="color: #D4D4D4;">  </span><span style="color: #DCDCAA;">webpack</span><span style="color: #9CDCFE;">:</span><span style="color: #D4D4D4;"> (</span><span style="color: #9CDCFE;">config</span><span style="color: #D4D4D4;">, { </span><span style="color: #9CDCFE;">defaultLoaders</span><span style="color: #D4D4D4;"> }) </span><span style="color: #569CD6;">=&gt;</span><span style="color: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: #D4D4D4;">    </span><span style="color: #9CDCFE;">config</span><span style="color: #D4D4D4;">.</span><span style="color: #9CDCFE;">resolve</span><span style="color: #D4D4D4;">.</span><span style="color: #9CDCFE;">extensions</span><span style="color: #D4D4D4;">.</span><span style="color: #DCDCAA;">push</span><span style="color: #D4D4D4;">(</span><span style="color: #CE9178;">'.ts'</span><span style="color: #D4D4D4;">, </span><span style="color: #CE9178;">'.tsx'</span><span style="color: #D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4;">    </span><span style="color: #9CDCFE;">config</span><span style="color: #D4D4D4;">.</span><span style="color: #9CDCFE;">module</span><span style="color: #D4D4D4;">.</span><span style="color: #9CDCFE;">rules</span><span style="color: #D4D4D4;">[</span><span style="color: #B5CEA8;">0</span><span style="color: #D4D4D4;">].</span><span style="color: #9CDCFE;">oneOf</span><span style="color: #D4D4D4;">.</span><span style="color: #DCDCAA;">unshift</span><span style="color: #D4D4D4;">({</span></span>
<span class="line"><span style="color: #D4D4D4;">      </span><span style="color: #9CDCFE;">test:</span><span style="color: #D16969;"> /</span><span style="color: #D7BA7D;">\.</span><span style="color: #CE9178;">(</span><span style="color: #D16969;">js</span><span style="color: #DCDCAA;">|</span><span style="color: #D16969;">jsx</span><span style="color: #DCDCAA;">|</span><span style="color: #D16969;">ts</span><span style="color: #DCDCAA;">|</span><span style="color: #D16969;">tsx</span><span style="color: #CE9178;">)</span><span style="color: #DCDCAA;">$</span><span style="color: #D16969;">/</span><span style="color: #D4D4D4;">,</span></span>
<span class="line"><span style="color: #D4D4D4;">      </span><span style="color: #9CDCFE;">exclude:</span><span style="color: #D4D4D4;"> </span><span style="color: #9CDCFE;">defaultLoaders</span><span style="color: #D4D4D4;">.</span><span style="color: #9CDCFE;">jsLoader</span><span style="color: #D4D4D4;">.</span><span style="color: #9CDCFE;">exclude</span><span style="color: #D4D4D4;">, </span><span style="color: #6A9955;">// as std jsLoader exclude</span></span>
<span class="line"><span style="color: #D4D4D4;">      </span><span style="color: #9CDCFE;">use:</span><span style="color: #D4D4D4;"> [</span></span>
<span class="line"><span style="color: #D4D4D4;">        { </span><span style="color: #9CDCFE;">loader:</span><span style="color: #D4D4D4;"> </span><span style="color: #CE9178;">'babel-loader'</span><span style="color: #D4D4D4;"> },</span></span>
<span class="line"><span style="color: #D4D4D4;">        {</span></span>
<span class="line"><span style="color: #D4D4D4;">          </span><span style="color: #9CDCFE;">loader:</span><span style="color: #D4D4D4;"> </span><span style="color: #9CDCFE;">require</span><span style="color: #D4D4D4;">.</span><span style="color: #DCDCAA;">resolve</span><span style="color: #D4D4D4;">(</span><span style="color: #CE9178;">'ts-loader'</span><span style="color: #D4D4D4;">),</span></span>
<span class="line"><span style="color: #D4D4D4;">          </span><span style="color: #9CDCFE;">options:</span><span style="color: #D4D4D4;"> { </span><span style="color: #9CDCFE;">transpileOnly:</span><span style="color: #D4D4D4;"> </span><span style="color: #569CD6;">true</span><span style="color: #D4D4D4;"> },</span></span>
<span class="line"><span style="color: #D4D4D4;">        },</span></span>
<span class="line"><span style="color: #D4D4D4;">      ],</span></span>
<span class="line"><span style="color: #D4D4D4;">    })</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4;">    </span><span style="color: #C586C0;">return</span><span style="color: #D4D4D4;"> </span><span style="color: #9CDCFE;">config</span></span>
<span class="line"><span style="color: #D4D4D4;">  },</span></span>
<span class="line"><span style="color: #D4D4D4;">}</span></span></code></pre></div>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">現在はこのような設定になっている。
あまり気に入った方法ではないが、しばらくはこれで様子を見ることにする。</p></main></article><ul class="c-1aue7hj"><li class="c-1sl6rns"><a href="/blog/deploy-to-github-pages-user-page/" class="MuiTypography-root MuiTypography-body1 MuiLink-root MuiLink-underlineAlways c-q1nw06">GitHub PagesのUser Pageにdistフォルダをデプロイする</a></li><li class="c-1bhrv1p"><a href="/" class="MuiTypography-root MuiTypography-body1 MuiLink-root MuiLink-underlineAlways c-q1nw06">HOME</a></li><li class="c-mpp38z"><a href="/blog/use-hyperapp/" class="MuiTypography-root MuiTypography-body1 MuiLink-root MuiLink-underlineAlways c-q1nw06">ブログをHyperappベースの自作ジェネレータに変更した話</a></li></ul><aside class="c-ze4krk"><header><h1 class="MuiTypography-root MuiTypography-h5 c-1jnynlu">同じタグを含む記事</h1><ul class="c-ntfpy7"> <li class="c-1vaygba"><a href="/tags/ReactStatic/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#ReactStatic</a></li> <li class="c-1vaygba"><a href="/tags/TypeScript/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#TypeScript</a></li> <li class="c-1vaygba"><a href="/tags/webpack/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#webpack</a></li></ul></header><main><ul class="c-1rvtlej"><li class="c-116qoqd"><article><header><div class="c-1n6wxgb"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CalendarTodayIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1qh3bxa"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path></svg><time dateTime="2018-12-20T14:58:37.388Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2018-12-20</time><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="SyncIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-9txlqf"><path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"></path></svg><time dateTime="2019-04-20T13:15:27.878Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2019-04-20</time></div><h1 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom c-1ihubty"><a href="/blog/wasm-bindgen-with-worker/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-x8nsji">Rust + wasm-bindgen + WebWorkerの環境構築</a></h1><ul class="c-ntfpy7"> <li class="c-1vaygba"><a href="/tags/Rust/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#Rust</a></li> <li class="c-1vaygba"><a href="/tags/wasm-bindgen/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#wasm-bindgen</a></li> <li class="c-1vaygba"><a href="/tags/TypeScript/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#TypeScript</a></li> <li class="c-1vaygba"><a href="/tags/parcel/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#parcel</a></li></ul></header></article></li><li class="c-116qoqd"><article><header><div class="c-1n6wxgb"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CalendarTodayIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1qh3bxa"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path></svg><time dateTime="2018-07-13T12:47:36.148Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2018-07-13</time></div><h1 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom c-1ihubty"><a href="/blog/remove-object-key/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-x8nsji">【ES.next】Objectから任意のキーを削除した新しいObjectを作成する</a></h1><ul class="c-ntfpy7"> <li class="c-1vaygba"><a href="/tags/JavaScript/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#JavaScript</a></li> <li class="c-1vaygba"><a href="/tags/Babel/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#Babel</a></li> <li class="c-1vaygba"><a href="/tags/TypeScript/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#TypeScript</a></li></ul></header></article></li><li class="c-116qoqd"><article><header><div class="c-1n6wxgb"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CalendarTodayIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1qh3bxa"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path></svg><time dateTime="2018-06-30T14:52:29.225Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2018-06-30</time><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="SyncIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-9txlqf"><path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"></path></svg><time dateTime="2019-04-20T13:15:27.878Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2019-04-20</time></div><h1 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom c-1ihubty"><a href="/blog/use-technology/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-x8nsji">ブログで使用した技術</a></h1><ul class="c-ntfpy7"> <li class="c-1vaygba"><a href="/tags/blog/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#blog</a></li> <li class="c-1vaygba"><a href="/tags/React/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#React</a></li> <li class="c-1vaygba"><a href="/tags/preact/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#preact</a></li> <li class="c-1vaygba"><a href="/tags/TypeScript/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#TypeScript</a></li> <li class="c-1vaygba"><a href="/tags/ReactStatic/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#ReactStatic</a></li></ul></header></article></li></ul></main></aside></div><footer class="c-1d3ah2d"><div class="MuiContainer-root MuiContainer-maxWidthLg c-1qsxih2"><p class="MuiTypography-root MuiTypography-body1 MuiTypography-gutterBottom c-fnf71d">Author: <a href="https://github.com/iMasanari" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-x8nsji">iMasanari</a></p><a href="https://github.com/iMasanari/imasanari.github.io/" class="MuiTypography-root MuiTypography-body2 MuiLink-root MuiLink-underlineAlways c-1j6il5h">Show on GitHub</a></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"React StaticでTypeScriptを使用した時のエラー対処法","description":"static.config.jsのwebpack設定を変更することで起こるエラーの対処法。","slug":"webpacks-rules-in-static-config-js","tags":["ReactStatic","TypeScript","webpack"],"date":"2018-07-03T11:47:13.910Z","update":null,"image":null,"draft":false},"next":{"title":"ブログをHyperappベースの自作ジェネレータに変更した話","description":"作ったばかりのこのブログだが、Hyperappで動くstaticでSPAなサイトに変更した。React Staticを使用していた時とは違って、HTMLの書き出しなどは自分で処理を行っている。まだ未完成な機能もあるが、ビルド後のJavaScriptが約8KBと軽量で気に入っている。","slug":"use-hyperapp","tags":["blog","Hyperapp"],"date":"2018-07-12T12:45:07.379Z","update":null,"image":"/images/hyperapp.png","draft":false},"prev":{"title":"GitHub PagesのUser Pageにdistフォルダをデプロイする","description":"User Pageにはmasterブランチしか指定できないようです。そこに任意のフォルダの中身をデプロイする方法を書きました。","slug":"deploy-to-github-pages-user-page","tags":["GitHubPages"],"date":"2018-07-01T15:11:38.719Z","update":"2018-07-02T13:49:48.876Z","image":null,"draft":false},"sameTags":[{"title":"Rust + wasm-bindgen + WebWorkerの環境構築","description":"WebAssembly Advent Calendar 2018の20日目の記事。","slug":"wasm-bindgen-with-worker","tags":["Rust","wasm-bindgen","TypeScript","parcel"],"date":"2018-12-20T14:58:37.388Z","update":"2019-04-20T13:15:27.878Z","image":null,"draft":false},{"title":"【ES.next】Objectから任意のキーを削除した新しいObjectを作成する","description":"ブログを作る前、Qiitaに投稿しようと書いていたけど途中でやめ、最近まで忘れていた記事です。Qiitaでもいいけど、せっかくだからこっちに置いておきます。","slug":"remove-object-key","tags":["JavaScript","Babel","TypeScript"],"date":"2018-07-13T12:47:36.148Z","update":null,"image":null,"draft":false},{"title":"ブログで使用した技術","description":"この技術ブログで使用したライブラリやツールを紹介していきます。選定理由についても書きました。","slug":"use-technology","tags":["blog","React","preact","TypeScript","ReactStatic"],"date":"2018-06-30T14:52:29.225Z","update":"2019-04-20T13:15:27.878Z","image":null,"draft":false}],"content":"\u003ch2\u003erulesを変更して\u003ccode\u003enpm run build\u003c/code\u003eするとエラーに\u003c/h2\u003e\n\u003cp\u003eこのブログはReact StaticのTypeScriptのexsampleがベースになっている。\nサンプルは開発中（\u003ccode\u003enpm run start\u003c/code\u003e）では問題はないが、プロダクションビルド（\u003ccode\u003enpm run build\u003c/code\u003e）するとエラーになるのでその対処法をメモして置く。\u003c/p\u003e\n\u003capp-code-wrapper lang=\"bash\" code=\"$ npm run build\n# ...\nError: Module build failed: Error: \u0026#x22;extract-text-webpack-plugin\u0026#x22; loader is used \nwithout the  corresponding plugin, refer to \nhttps://github.com/webpack/extract-text-webpack-plugin for th  e usage example\"\u003e\u003cpre class=\"shiki\" style=\"background-color: #1E1E1E\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e$ npm run build\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A9955\"\u003e# ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003eError: Module build failed: Error: \u003c/span\u003e\u003cspan style=\"color: #CE9178\"\u003e\u0026quot;extract-text-webpack-plugin\u0026quot;\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e loader is used \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003ewithout the  corresponding plugin, refer to \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003ehttps://github.com/webpack/extract-text-webpack-plugin \u003c/span\u003e\u003cspan style=\"color: #C586C0\"\u003efor\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e th  e usage example\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/app-code-wrapper\u003e\n\u003cp\u003eサンプルの初期コードどころか、そもそも下記の設定で動かなかった。\u003c/p\u003e\n\u003capp-code-wrapper title=\"static.config.js\" lang=\"js\" code=\"export default {\n  // ...\n  webpack: (config, { defaultLoaders }) =\u003e {\n    config.module.rules = [{\n      oneOf: [\n        // ↓tsの設定を無くしデフォルトのを使用するもエラー継続\n        defaultLoaders.jsLoader,\n        defaultLoaders.cssLoader,\n        defaultLoaders.fileLoader,\n      ],\n    }]\n    \n    return config\n  }\n}\"\u003e\u003cpre class=\"shiki\" style=\"background-color: #1E1E1E\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #C586C0\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #C586C0\"\u003edefault\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #6A9955\"\u003e// ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #DCDCAA\"\u003ewebpack\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003econfig\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e, { \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003edefaultLoaders\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e }) \u003c/span\u003e\u003cspan style=\"color: #569CD6\"\u003e=\u0026gt;\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003econfig\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003emodule\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003erules\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e = [{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eoneOf:\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #6A9955\"\u003e// ↓tsの設定を無くしデフォルトのを使用するもエラー継続\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003edefaultLoaders\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003ejsLoader\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003edefaultLoaders\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003ecssLoader\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003edefaultLoaders\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003efileLoader\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e      ],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e    }]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e    \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #C586C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003econfig\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/app-code-wrapper\u003e\n\u003cp\u003eデフォルトとは一体…\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003econfig.module.rules\u003c/code\u003eを変更しない場合は問題なくビルドすることができる。\n\u003ccode\u003edefaultLoaders.cssLoader\u003c/code\u003eが悪さをしているようだ。\u003c/p\u003e\n\u003ch2\u003e暫定的対処法\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003edefaultLoaders.cssLoader\u003c/code\u003eを使わず、既存のルールの先頭に追加したい処理を置く。\nルールは\u003ccode\u003eoneOf\u003c/code\u003eで書かれているため、最初に一致するルールのみが使用される。先頭に追加することで、既存のルールは変更することなくマイルールを適用することができるのだ。\u003c/p\u003e\n\u003capp-code-wrapper title=\"static.config.js\" lang=\"js\" code=\"export default {\n  // ...\n  webpack: (config, { defaultLoaders }) =\u003e {\n    config.resolve.extensions.push(\u0026#x27;.ts\u0026#x27;, \u0026#x27;.tsx\u0026#x27;)\n\n    config.module.rules[0].oneOf.unshift({\n      test: /\\.(js|jsx|ts|tsx)$/,\n      exclude: defaultLoaders.jsLoader.exclude, // as std jsLoader exclude\n      use: [\n        { loader: \u0026#x27;babel-loader\u0026#x27; },\n        {\n          loader: require.resolve(\u0026#x27;ts-loader\u0026#x27;),\n          options: { transpileOnly: true },\n        },\n      ],\n    })\n\n    return config\n  },\n}\"\u003e\u003cpre class=\"shiki\" style=\"background-color: #1E1E1E\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #C586C0\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #C586C0\"\u003edefault\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #6A9955\"\u003e// ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #DCDCAA\"\u003ewebpack\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003e:\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e (\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003econfig\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e, { \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003edefaultLoaders\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e }) \u003c/span\u003e\u003cspan style=\"color: #569CD6\"\u003e=\u0026gt;\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003econfig\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eresolve\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eextensions\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #DCDCAA\"\u003epush\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CE9178\"\u003e\u0026#39;.ts\u0026#39;\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #CE9178\"\u003e\u0026#39;.tsx\u0026#39;\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003econfig\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003emodule\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003erules\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e[\u003c/span\u003e\u003cspan style=\"color: #B5CEA8\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e].\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eoneOf\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #DCDCAA\"\u003eunshift\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003etest:\u003c/span\u003e\u003cspan style=\"color: #D16969\"\u003e /\u003c/span\u003e\u003cspan style=\"color: #D7BA7D\"\u003e\\.\u003c/span\u003e\u003cspan style=\"color: #CE9178\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #D16969\"\u003ejs\u003c/span\u003e\u003cspan style=\"color: #DCDCAA\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #D16969\"\u003ejsx\u003c/span\u003e\u003cspan style=\"color: #DCDCAA\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #D16969\"\u003ets\u003c/span\u003e\u003cspan style=\"color: #DCDCAA\"\u003e|\u003c/span\u003e\u003cspan style=\"color: #D16969\"\u003etsx\u003c/span\u003e\u003cspan style=\"color: #CE9178\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #DCDCAA\"\u003e$\u003c/span\u003e\u003cspan style=\"color: #D16969\"\u003e/\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eexclude:\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003edefaultLoaders\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003ejsLoader\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eexclude\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #6A9955\"\u003e// as std jsLoader exclude\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003euse:\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e        { \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eloader:\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CE9178\"\u003e\u0026#39;babel-loader\u0026#39;\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e        {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eloader:\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003erequire\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e.\u003c/span\u003e\u003cspan style=\"color: #DCDCAA\"\u003eresolve\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #CE9178\"\u003e\u0026#39;ts-loader\u0026#39;\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e          \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eoptions:\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e { \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003etranspileOnly:\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #569CD6\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e        },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e      ],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e    })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #C586C0\"\u003ereturn\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003econfig\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/app-code-wrapper\u003e\n\u003cp\u003e現在はこのような設定になっている。\nあまり気に入った方法ではないが、しばらくはこれで様子を見ることにする。\u003c/p\u003e"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"webpacks-rules-in-static-config-js"},"buildId":"1mq89Dz1R38xgNgBrWpSQ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>