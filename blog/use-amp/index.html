<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-74494516-4"></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-74494516-4', {
  page_path: window.location.pathname,
});
</script><meta name="google-site-verification" content="UmWq3FQLg72H6H0Tlk-SFR9f0bSBsvC8nDmxtK3-qMc" /><meta name="next-font-preconnect" /><meta name="viewport" content="width=device-width" /><meta charSet="utf-8" /><title>ブログをAMP対応（仮）しました | Tech SANDBOX</title><meta name="description" content="実質、各ページに `export const config = { amp: 'hybrid' }` を追加しただけ。next.js超ラク。" /><meta property="og:title" content="ブログをAMP対応（仮）しました" /><meta property="og:description" content="実質、各ページに `export const config = { amp: 'hybrid' }` を追加しただけ。next.js超ラク。" /><meta property="og:type" content="article" /><meta property="og:url" content="https://imasanari.github.io/blog/use-amp/" /><meta property="og:image" content="https://imasanari.github.io/images/icon.jpg" /><meta property="og:site_name" content="Tech SANDBOX" /><meta name="twitter:card" content="summary" /><meta name="next-head-count" content="11" /><link rel="amphtml" href="/blog/use-amp.amp" /><noscript data-n-css></noscript><script defer noModule src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-fb76148cfcfb42ca18eb.js" defer></script><script src="/_next/static/chunks/framework-99e312cfb7dcf1fad3b6.js" defer></script><script src="/_next/static/chunks/main-954eafc91ecd5de4a70b.js" defer></script><script src="/_next/static/chunks/pages/_app-2e2bea96e02645a3a15f.js" defer></script><script src="/_next/static/chunks/670-a2700d6f91d45df1d033.js" defer></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-6b2fcb1d1760a07d19a6.js" defer></script><script src="/_next/static/PnElu_33CnQAyEEEfU9mg/_buildManifest.js" defer></script><script src="/_next/static/PnElu_33CnQAyEEEfU9mg/_ssgManifest.js" defer></script><style data-emotion="c-global 15yblv4">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><style data-emotion="c 1j2cbpl g7fid7 1ff36h2 1x6wkub 1qeofn3 wb6uyc rntpfg up73zk zjuml4 1dmadst vubbuv 191lty2 1qsxih2 1yjvs5a 1n6wxgb 1qh3bxa 16n8wpk 1ihubty 1772xtw 1bbvdb4 chkhw5 y25xid 35e4su 1ugattu 15x2j1y x4at48 cbw5c6 x8nsji 1aue7hj nkh4ut q1nw06 1hdf6gm 1hbvs7c ze4krk 1jnynlu v5al3 116qoqd 1d3ah2d fnf71d 1j6il5h">.c-1j2cbpl{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;box-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:fixed;z-index:1100;top:0;left:auto;right:0;background-color:#f5f5f5;color:rgba(0, 0, 0, 0.87);}@media print{.c-1j2cbpl{position:absolute;}}.c-g7fid7{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;display:block;padding-left:16px;padding-right:16px;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:56px;}@media (min-width:600px){.c-g7fid7{padding-left:24px;padding-right:24px;}}@media (min-width:1200px){.c-g7fid7{max-width:1200px;}}@media (min-width:0px) and (orientation: landscape){.c-g7fid7{min-height:48px;}}@media (min-width:600px){.c-g7fid7{min-height:64px;}}.c-1ff36h2{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}.c-1x6wkub{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1.25rem;line-height:1.6;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.c-1qeofn3{margin:0;color:inherit;-webkit-text-decoration:none;text-decoration:none;}.c-wb6uyc{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:0.875rem;line-height:1.43;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}@media (min-width:0px){.c-rntpfg{display:none;}}@media (min-width:600px){.c-rntpfg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.c-up73zk{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:inherit;margin-left:24px;-webkit-text-decoration:underline;text-decoration:underline;}.c-up73zk:hover{text-decoration-color:inherit;}@media (min-width:0px){.c-zjuml4{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media (min-width:600px){.c-zjuml4{display:none;}}.c-1dmadst{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;margin-right:-12px;color:inherit;padding:12px;font-size:1.75rem;}.c-1dmadst::-moz-focus-inner{border-style:none;}.c-1dmadst.Mui-disabled{pointer-events:none;cursor:default;}@media print{.c-1dmadst{-webkit-print-color-adjust:exact;color-adjust:exact;}}.c-1dmadst:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.c-1dmadst:hover{background-color:transparent;}}.c-1dmadst.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}.c-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}.c-191lty2{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:16px;padding-right:16px;min-height:56px;}@media (min-width:600px){.c-191lty2{padding-left:24px;padding-right:24px;}}@media (min-width:0px) and (orientation: landscape){.c-191lty2{min-height:48px;}}@media (min-width:600px){.c-191lty2{min-height:64px;}}.c-1qsxih2{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;display:block;padding-left:16px;padding-right:16px;}@media (min-width:600px){.c-1qsxih2{padding-left:24px;padding-right:24px;}}@media (min-width:1200px){.c-1qsxih2{max-width:1200px;}}.c-1yjvs5a{margin-bottom:32px;}.c-1n6wxgb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:8px 0px;}.c-1qh3bxa{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.25rem;margin-right:4px;}.c-16n8wpk{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:0.875rem;line-height:1.43;}.c-1ihubty{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1.5rem;line-height:1.334;margin-bottom:0.35em;}.c-1772xtw{padding:0;margin:0;}.c-1bbvdb4{display:inline;padding:0;margin:0;}.c-chkhw5{margin:0;color:rgba(0, 0, 0, 0.6);-webkit-text-decoration:none;text-decoration:none;}.c-chkhw5:hover{-webkit-text-decoration:underline;text-decoration:underline;}.c-y25xid{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;margin-top:16px;margin-bottom:16px;text-align:justify;white-space:pre-line;}.c-35e4su{padding:4px 8px;border-radius:4px;background-color:#1e1e1e;color:#d4d4d4;font-family:"SFMono-Regular",Consolas,Menlo,Courier,monospace,monospace;font-size:0.9em;}pre>.c-35e4su{padding:0;background-color:transparent;}.c-1ugattu{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:2.125rem;line-height:1.235;margin-top:32px;margin-bottom:32px;border-bottom:1px solid currentcolor;}.c-15x2j1y{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1.5rem;line-height:1.334;margin-top:24px;margin-bottom:24px;}.c-x4at48{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;margin-top:16px;margin-bottom:16px;overflow:auto;padding:8px 32px;}.c-cbw5c6{padding:4px 8px;border-radius:4px;background-color:#1e1e1e;color:#d4d4d4;font-family:"SFMono-Regular",Consolas,Menlo,Courier,monospace,monospace;font-size:0.9em;word-break:break-all;}pre>.c-cbw5c6{padding:0;background-color:transparent;}.c-x8nsji{margin:0;color:#1976d2;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(25, 118, 210, 0.4);}.c-x8nsji:hover{text-decoration-color:inherit;}.c-1aue7hj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0;margin:32px 0px;}.c-nkh4ut{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 16px;margin:0;-webkit-flex:1;-ms-flex:1;flex:1;padding-left:0;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;}.c-q1nw06{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;color:#1976d2;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(25, 118, 210, 0.4);}.c-q1nw06:hover{text-decoration-color:inherit;}.c-1hdf6gm{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 16px;margin:0;border-left:1px solid #6c6c6c;border-right:1px solid #6c6c6c;}.c-1hbvs7c{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 16px;margin:0;-webkit-flex:1;-ms-flex:1;flex:1;padding-right:0;}.c-ze4krk{margin:32px auto;}.c-1jnynlu{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1.5rem;line-height:1.334;}.c-v5al3{list-style:none;padding:0;margin:0;}.c-116qoqd{padding:16px 24px;margin:16px 0px;border:1px solid #bbb;}.c-1d3ah2d{text-align:center;margin:32px 0px;}.c-fnf71d{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:1rem;line-height:1.5;margin-bottom:0.35em;}.c-1j6il5h{margin:0;font-family:游ゴシック体,YuGothic,游ゴシック,Yu Gothic,メイリオ,sans-serif;font-weight:500;font-size:0.875rem;line-height:1.43;color:#1976d2;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(25, 118, 210, 0.4);}.c-1j6il5h:hover{text-decoration-color:inherit;}</style></head><body><div id="__next"><header amp-fx="float-in-top" class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation1 MuiAppBar-root MuiAppBar-colorDefault MuiAppBar-positionFixed mui-fixed c-1j2cbpl"><div class="MuiContainer-root MuiContainer-maxWidthLg MuiToolbar-root MuiToolbar-regular c-g7fid7"><div class="c-1ff36h2"><div class="MuiTypography-root MuiTypography-h6 MuiTypography-noWrap c-1x6wkub"><a href="/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineNone c-1qeofn3">Tech SANDBOX</a></div><p class="MuiTypography-root MuiTypography-body2 MuiTypography-noWrap c-wb6uyc">技術ブログ改め、Qiitaの下書き</p></div><nav class="MuiBox-root c-rntpfg"><a href="/" class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineAlways c-up73zk">Blog</a><a href="https://github.com/iMasanari" target="_blank" rel="noopener" class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineAlways c-up73zk">GitHub</a><a href="https://qiita.com/iMasanari" target="_blank" rel="noopener" class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineAlways c-up73zk">Qiita</a></nav><div class="MuiBox-root c-zjuml4"><button tabIndex="0" type="button" aria-label="menu" class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit MuiIconButton-edgeEnd MuiIconButton-sizeLarge c-1dmadst"><svg focusable="false" viewBox="0 0 24 24" aria-hidden="true" data-testid="MenuIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium c-vubbuv"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button></div></div></header><div class="MuiToolbar-root MuiToolbar-gutters MuiToolbar-regular c-191lty2"></div><div class="MuiContainer-root MuiContainer-maxWidthLg c-1qsxih2"><article><div class="MuiBox-root c-1yjvs5a"><header><div class="c-1n6wxgb"><svg focusable="false" viewBox="0 0 24 24" aria-hidden="true" data-testid="CalendarTodayIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1qh3bxa"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path></svg><time dateTime="2020-11-28T08:05:18.607Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2020-11-28</time></div><h1 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom c-1ihubty">ブログをAMP対応（仮）しました</h1><ul class="c-1772xtw"> <li class="c-1bbvdb4"><a href="/tags/AMP/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#AMP</a></li> <li class="c-1bbvdb4"><a href="/tags/Next.js" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#Next.js</a></li> <li class="c-1bbvdb4"><a href="/tags/blog/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#blog</a></li></ul></header></div><main><p class="MuiTypography-root MuiTypography-body1 c-y25xid">実質、各ページコンポーネントに <code class="c-35e4su">export const config = { amp: 'hybrid' }</code> を追加しただけ。<br />
Next.js超ラク。</p>
<h2 class="MuiTypography-root MuiTypography-h4 c-1ugattu">AMPとは</h2>
<blockquote>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">Accelerated Mobile Pages (AMP) は、Googleが中心となって立ち上げた、モバイルでのウェブサイト閲覧を高速化することを目的とするオープンソースプロジェクトである。また、AMPの成果物である一連の仕様やライブラリなどについてもAMPと呼ぶ。AMPは、従来より用いられているHTMLなどのウェブ技術を改良したもので、中核となるのはAMP HTMLと呼ばれるHTMLの一種である。</p>
</blockquote>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">らしいです。Wikipadiaより引用。</p>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">ページの表示が遅くなる書き方を禁止するため、HTMLの書き方が制限されますが、代わりにAMPが用意したコンポーネントを使用できます。そして、AMPのルールに沿って書くことで、モバイル時にGoogle検索からページに入るときなどにAMP Cacheと呼ばれる専用のCDNから配信されるというメリットがあります。</p>
<h2 class="MuiTypography-root MuiTypography-h4 c-1ugattu">やったこと</h2>
<h3 class="MuiTypography-root MuiTypography-h5 c-15x2j1y">AMP設定の追加</h3>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">上記の通り、下記を追加しました。</p>
<pre style="background-color: #1E1E1E;" class="MuiTypography-root MuiTypography-body1 shiki c-x4at48"><code class="c-35e4su"><span class="line"><span style="color: #C586C0;">export</span><span style="color: #D4D4D4;"> </span><span style="color: #569CD6;">const</span><span style="color: #D4D4D4;"> </span><span style="color: #4FC1FF;">config</span><span style="color: #D4D4D4;"> = { </span><span style="color: #9CDCFE;">amp:</span><span style="color: #D4D4D4;"> </span><span style="color: #CE9178;">'hybrid'</span><span style="color: #D4D4D4;"> }</span></span>
<span class="line"></span></code></pre>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">上記の設定を追加することで、<code class="c-35e4su">next export</code> 時に下記のようにファイルが出力されます。</p>
<pre style="background-color: #1E1E1E;" class="MuiTypography-root MuiTypography-body1 shiki c-x4at48"><code class="c-35e4su"><span class="line"><span style="color: #D4D4D4;">$ tree out/blog</span></span>
<span class="line"><span style="color: #D4D4D4;">out/blog</span></span>
<span class="line"><span style="color: #D4D4D4;">├── deploy-to-github-pages-user-page</span></span>
<span class="line"><span style="color: #D4D4D4;">│   └── index.html</span></span>
<span class="line"><span style="color: #D4D4D4;">├── deploy-to-github-pages-user-page.amp</span></span>
<span class="line"><span style="color: #D4D4D4;">│   └── index.html</span></span>
<span class="line"><span style="color: #D4D4D4;">├── difference-between-jsx-and-html</span></span>
<span class="line"><span style="color: #D4D4D4;">│   └── index.html</span></span>
<span class="line"><span style="color: #D4D4D4;">├── difference-between-jsx-and-html.amp</span></span>
<span class="line"><span style="color: #D4D4D4;">│   └── index.html</span></span>
<span class="line"><span style="color: #D4D4D4;">├── environment-construction</span></span>
<span class="line"><span style="color: #D4D4D4;">│   └── index.html</span></span>
<span class="line"><span style="color: #D4D4D4;">├── environment-construction.amp</span></span>
<span class="line"><span style="color: #D4D4D4;">│   └── index.html</span></span>
<span class="line"><span style="color: #D4D4D4;">...</span></span>
<span class="line"></span></code></pre>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">AMP時は <code class="c-35e4su">{slug}.amp/index.html</code> に、非AMP時は <code class="c-35e4su">{slug}/index.html</code> が使用されます。</p>
<h3 class="MuiTypography-root MuiTypography-h5 c-15x2j1y">グローバルCSSの読み込み方法の変更</h3>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">グローバルCSSをWebpackの <code class="c-cbw5c6">import</code> 経由ではなく、styled-jsx + postcss-importで読み込むように変更しました。Webpackの <code class="c-cbw5c6">import</code> だと、AMP時にうまく読み込まれないようです。</p>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">参考： <a href="https://github.com/vercel/next.js/issues/7121" target="_blank" rel="noopener" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-x8nsji">AMP: styles missing when importing standard css files in a project using styled components #7121</a></p>
<pre style="background-color: #1E1E1E;" class="MuiTypography-root MuiTypography-body1 shiki c-x4at48"><code class="c-35e4su"><span class="line"><span style="color: #D4D4D4;">// src/pages/_app.tsx</span></span>
<span class="line"></span>
<span class="line"><span style="color: #CE9178;">-import 'mvp.css'</span></span>
<span class="line"><span style="color: #CE9178;">-import 'prismjs/themes/prism-okaidia.css'</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4;"> // ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4;"> &lt;style jsx global&gt;{`</span></span>
<span class="line"><span style="color: #B5CEA8;">+  @import 'mvp.css';</span></span>
<span class="line"><span style="color: #B5CEA8;">+  @import 'prismjs/themes/prism-okaidia.css';</span></span>
<span class="line"><span style="color: #D4D4D4;">   /* ... */</span></span>
<span class="line"><span style="color: #D4D4D4;"> `}&lt;/style&gt;</span></span>
<span class="line"></span></code></pre>
<pre style="background-color: #1E1E1E;" class="MuiTypography-root MuiTypography-body1 shiki c-x4at48"><code class="c-35e4su"><span class="line"><span style="color: #D4D4D4;">// postcss.config.js</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4;">module.exports = {</span></span>
<span class="line"><span style="color: #D4D4D4;">  plugins: {</span></span>
<span class="line"><span style="color: #D4D4D4;">    'postcss-custom-properties': {},</span></span>
<span class="line"><span style="color: #B5CEA8;">+   'postcss-import': {},</span></span>
<span class="line"><span style="color: #D4D4D4;">  },</span></span>
<span class="line"><span style="color: #D4D4D4;">}</span></span>
<span class="line"></span></code></pre>
<h3 class="MuiTypography-root MuiTypography-h5 c-15x2j1y">スタイル調整</h3>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">各ページのコンポーネントについて、非AMP時は <code class="c-35e4su">&lt;div id=&quot;__next&quot;&gt;...&lt;/div&gt;</code> の中に展開されますが、AMP時は <code class="c-cbw5c6">body</code> 以下に直接展開されます。</p>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">現在このブログで使用しているCSSフレームワークの「mvp.css」に下記のようなスタイルがあったため、AMP時と非AMP時で表示に差異が出ていました。</p>
<pre style="background-color: #1E1E1E;" class="MuiTypography-root MuiTypography-body1 shiki c-x4at48"><code class="c-35e4su"><span class="line"><span style="color: #6A9955;">/* mvp.css */</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955;">/* 非AMP時のみ下記が適応されない */</span></span>
<span class="line"><span style="color: #D7BA7D;">article</span><span style="color: #D4D4D4;"> </span><span style="color: #D7BA7D;">header</span><span style="color: #D4D4D4;">, </span><span style="color: #D7BA7D;">div</span><span style="color: #D4D4D4;"> </span><span style="color: #D7BA7D;">header</span><span style="color: #D4D4D4;">, </span><span style="color: #D7BA7D;">main</span><span style="color: #D4D4D4;"> </span><span style="color: #D7BA7D;">header</span><span style="color: #D4D4D4;"> {</span></span>
<span class="line"><span style="color: #D4D4D4;">  </span><span style="color: #9CDCFE;">padding-top</span><span style="color: #D4D4D4;">: </span><span style="color: #B5CEA8;">0</span><span style="color: #D4D4D4;">;</span></span>
<span class="line"><span style="color: #D4D4D4;">}</span></span>
<span class="line"></span></code></pre>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">非AMP時でも同じ見た目になるよう、下記を追加しました。</p>
<pre style="background-color: #1E1E1E;" class="MuiTypography-root MuiTypography-body1 shiki c-x4at48"><code class="c-35e4su"><span class="line"><span style="color: #D4D4D4;">// src/components/organisms/Header.tsx</span></span>
<span class="line"></span>
<span class="line"><span style="color: #B5CEA8;">+&lt;style jsx&gt;{`</span></span>
<span class="line"><span style="color: #B5CEA8;">+.Header {</span></span>
<span class="line"><span style="color: #B5CEA8;">+  padding-top: 0;</span></span>
<span class="line"><span style="color: #B5CEA8;">+}</span></span>
<span class="line"><span style="color: #B5CEA8;">+`}&lt;/style&gt;</span></span>
<span class="line"></span></code></pre>
<h2 class="MuiTypography-root MuiTypography-h4 c-1ugattu">やらなかったこと</h2>
<h3 class="MuiTypography-root MuiTypography-h5 c-15x2j1y">AMP Componentsの使用</h3>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">画像を使っていなかったので、<code class="c-35e4su">amp-img</code> すら使っていないです。だからこそ、楽に対応できたというのもあります。<br />
AMP時と非AMP時の表示の切り替えなどもありません。</p>
<h2 class="MuiTypography-root MuiTypography-h4 c-1ugattu">まとめ</h2>
<p class="MuiTypography-root MuiTypography-body1 c-y25xid">シンプルなので、簡単にできました、という感じです。<br />
画像はそのうち対応したいです。</p></main></article><ul class="c-1aue7hj"><li class="c-nkh4ut"><a href="/blog/use-next/" class="MuiTypography-root MuiTypography-body1 MuiLink-root MuiLink-underlineAlways c-q1nw06">ブログをNext.jsベースに変更した</a></li><li class="c-1hdf6gm"><a href="/" class="MuiTypography-root MuiTypography-body1 MuiLink-root MuiLink-underlineAlways c-q1nw06">HOME</a></li><li class="c-1hbvs7c"></li></ul><aside class="c-ze4krk"><header><h1 class="MuiTypography-root MuiTypography-h5 c-1jnynlu">同じタグを含む記事</h1><ul class="c-1772xtw"> <li class="c-1bbvdb4"><a href="/tags/AMP/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#AMP</a></li> <li class="c-1bbvdb4"><a href="/tags/Next.js" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#Next.js</a></li> <li class="c-1bbvdb4"><a href="/tags/blog/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#blog</a></li></ul></header><main><ul class="c-v5al3"><li class="c-116qoqd"><article><header><div class="c-1n6wxgb"><svg focusable="false" viewBox="0 0 24 24" aria-hidden="true" data-testid="CalendarTodayIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1qh3bxa"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path></svg><time dateTime="2020-09-20T06:33:49.199Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2020-09-20</time></div><h1 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom c-1ihubty"><a href="/blog/use-next/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-x8nsji">ブログをNext.jsベースに変更した</a></h1><ul class="c-1772xtw"> <li class="c-1bbvdb4"><a href="/tags/React/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#React</a></li> <li class="c-1bbvdb4"><a href="/tags/Next.js" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#Next.js</a></li> <li class="c-1bbvdb4"><a href="/tags/blog/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#blog</a></li></ul></header></article></li><li class="c-116qoqd"><article><header><div class="c-1n6wxgb"><svg focusable="false" viewBox="0 0 24 24" aria-hidden="true" data-testid="CalendarTodayIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1qh3bxa"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path></svg><time dateTime="2019-04-26T13:55:56.097Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2019-04-26</time></div><h1 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom c-1ihubty"><a href="/blog/use-parcel/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-x8nsji">ブログ開発をParcelに変更した</a></h1><ul class="c-1772xtw"> <li class="c-1bbvdb4"><a href="/tags/parcel/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#parcel</a></li> <li class="c-1bbvdb4"><a href="/tags/blog/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#blog</a></li></ul></header></article></li><li class="c-116qoqd"><article><header><div class="c-1n6wxgb"><svg focusable="false" viewBox="0 0 24 24" aria-hidden="true" data-testid="CalendarTodayIcon" class="MuiSvgIcon-root MuiSvgIcon-fontSizeSmall c-1qh3bxa"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path></svg><time dateTime="2018-07-12T12:45:07.379Z" class="MuiTypography-root MuiTypography-body2 c-16n8wpk">2018-07-12</time></div><h1 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom c-1ihubty"><a href="/blog/use-hyperapp/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-x8nsji">ブログをHyperappベースの自作ジェネレータに変更した話</a></h1><ul class="c-1772xtw"> <li class="c-1bbvdb4"><a href="/tags/blog/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#blog</a></li> <li class="c-1bbvdb4"><a href="/tags/Hyperapp/" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover c-chkhw5">#Hyperapp</a></li></ul></header></article></li></ul></main></aside></div><footer class="c-1d3ah2d"><div class="MuiContainer-root MuiContainer-maxWidthLg c-1qsxih2"><p class="MuiTypography-root MuiTypography-body1 MuiTypography-gutterBottom c-fnf71d">Author: <a href="https://github.com/iMasanari" class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways c-x8nsji">iMasanari</a></p><a href="https://github.com/iMasanari/imasanari.github.io/" class="MuiTypography-root MuiTypography-body2 MuiLink-root MuiLink-underlineAlways c-1j6il5h">Show on GitHub</a></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"ブログをAMP対応（仮）しました","description":"実質、各ページに `export const config = { amp: 'hybrid' }` を追加しただけ。next.js超ラク。","slug":"use-amp","tags":["AMP","Next.js","blog"],"date":"2020-11-28T08:05:18.607Z"},"next":null,"prev":{"title":"ブログをNext.jsベースに変更した","description":null,"slug":"use-next","tags":["React","Next.js","blog"],"date":"2020-09-20T06:33:49.199Z"},"sameTags":[{"title":"ブログをNext.jsベースに変更した","description":null,"slug":"use-next","tags":["React","Next.js","blog"],"date":"2020-09-20T06:33:49.199Z"},{"title":"ブログ開発をParcelに変更した","description":"前回の記事でparcelを使用して便利だったので、このブログのモジュールバンドラをparcelに変更した。決め手は、Tree Shakingがサポートされていたから。","slug":"use-parcel","tags":["parcel","blog"],"date":"2019-04-26T13:55:56.097Z"},{"title":"ブログをHyperappベースの自作ジェネレータに変更した話","description":"作ったばかりのこのブログだが、Hyperappで動くstaticでSPAなサイトに変更した。React Staticを使用していた時とは違って、HTMLの書き出しなどは自分で処理を行っている。まだ未完成な機能もあるが、ビルド後のJavaScriptが約8KBと軽量で気に入っている。","slug":"use-hyperapp","tags":["blog","Hyperapp"],"image":"/images/hyperapp.png","date":"2018-07-12T12:45:07.379Z"}],"content":"\u003cp\u003e実質、各ページコンポーネントに \u003ccode\u003eexport const config = { amp: 'hybrid' }\u003c/code\u003e を追加しただけ。\u003cbr\u003e\nNext.js超ラク。\u003c/p\u003e\n\u003ch2\u003eAMPとは\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAccelerated Mobile Pages (AMP) は、Googleが中心となって立ち上げた、モバイルでのウェブサイト閲覧を高速化することを目的とするオープンソースプロジェクトである。また、AMPの成果物である一連の仕様やライブラリなどについてもAMPと呼ぶ。AMPは、従来より用いられているHTMLなどのウェブ技術を改良したもので、中核となるのはAMP HTMLと呼ばれるHTMLの一種である。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eらしいです。Wikipadiaより引用。\u003c/p\u003e\n\u003cp\u003eページの表示が遅くなる書き方を禁止するため、HTMLの書き方が制限されますが、代わりにAMPが用意したコンポーネントを使用できます。そして、AMPのルールに沿って書くことで、モバイル時にGoogle検索からページに入るときなどにAMP Cacheと呼ばれる専用のCDNから配信されるというメリットがあります。\u003c/p\u003e\n\u003ch2\u003eやったこと\u003c/h2\u003e\n\u003ch3\u003eAMP設定の追加\u003c/h3\u003e\n\u003cp\u003e上記の通り、下記を追加しました。\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #1E1E1E\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #C586C0\"\u003eexport\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #569CD6\"\u003econst\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #4FC1FF\"\u003econfig\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e = { \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003eamp:\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #CE9178\"\u003e'hybrid'\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e上記の設定を追加することで、\u003ccode\u003enext export\u003c/code\u003e 時に下記のようにファイルが出力されます。\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #1E1E1E\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e$ tree out/blog\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003eout/blog\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e├── deploy-to-github-pages-user-page\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e│   └── index.html\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e├── deploy-to-github-pages-user-page.amp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e│   └── index.html\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e├── difference-between-jsx-and-html\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e│   └── index.html\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e├── difference-between-jsx-and-html.amp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e│   └── index.html\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e├── environment-construction\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e│   └── index.html\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e├── environment-construction.amp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e│   └── index.html\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAMP時は \u003ccode\u003e{slug}.amp/index.html\u003c/code\u003e に、非AMP時は \u003ccode\u003e{slug}/index.html\u003c/code\u003e が使用されます。\u003c/p\u003e\n\u003ch3\u003eグローバルCSSの読み込み方法の変更\u003c/h3\u003e\n\u003cp\u003eグローバルCSSをWebpackの \u003ccode\u003eimport\u003c/code\u003e 経由ではなく、styled-jsx + postcss-importで読み込むように変更しました。Webpackの \u003ccode\u003eimport\u003c/code\u003e だと、AMP時にうまく読み込まれないようです。\u003c/p\u003e\n\u003cp\u003e参考： \u003ca href=\"https://github.com/vercel/next.js/issues/7121\"\u003eAMP: styles missing when importing standard css files in a project using styled components #7121\u003c/a\u003e\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #1E1E1E\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e// src/pages/_app.tsx\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CE9178\"\u003e-import 'mvp.css'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #CE9178\"\u003e-import 'prismjs/themes/prism-okaidia.css'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e // ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u0026#x3C;style jsx global\u003e{`\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #B5CEA8\"\u003e+  @import 'mvp.css';\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #B5CEA8\"\u003e+  @import 'prismjs/themes/prism-okaidia.css';\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e   /* ... */\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e `}\u0026#x3C;/style\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #1E1E1E\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e// postcss.config.js\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003emodule.exports = {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  plugins: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e    'postcss-custom-properties': {},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #B5CEA8\"\u003e+   'postcss-import': {},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eスタイル調整\u003c/h3\u003e\n\u003cp\u003e各ページのコンポーネントについて、非AMP時は \u003ccode\u003e\u0026#x3C;div id=\"__next\"\u003e...\u0026#x3C;/div\u003e\u003c/code\u003e の中に展開されますが、AMP時は \u003ccode\u003ebody\u003c/code\u003e 以下に直接展開されます。\u003c/p\u003e\n\u003cp\u003e現在このブログで使用しているCSSフレームワークの「mvp.css」に下記のようなスタイルがあったため、AMP時と非AMP時で表示に差異が出ていました。\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #1E1E1E\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A9955\"\u003e/* mvp.css */\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6A9955\"\u003e/* 非AMP時のみ下記が適応されない */\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D7BA7D\"\u003earticle\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D7BA7D\"\u003eheader\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #D7BA7D\"\u003ediv\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D7BA7D\"\u003eheader\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #D7BA7D\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e \u003c/span\u003e\u003cspan style=\"color: #D7BA7D\"\u003eheader\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #9CDCFE\"\u003epadding-top\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #B5CEA8\"\u003e0\u003c/span\u003e\u003cspan style=\"color: #D4D4D4\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e非AMP時でも同じ見た目になるよう、下記を追加しました。\u003c/p\u003e\n\u003cpre class=\"shiki\" style=\"background-color: #1E1E1E\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D4D4D4\"\u003e// src/components/organisms/Header.tsx\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #B5CEA8\"\u003e+\u0026#x3C;style jsx\u003e{`\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #B5CEA8\"\u003e+.Header {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #B5CEA8\"\u003e+  padding-top: 0;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #B5CEA8\"\u003e+}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #B5CEA8\"\u003e+`}\u0026#x3C;/style\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eやらなかったこと\u003c/h2\u003e\n\u003ch3\u003eAMP Componentsの使用\u003c/h3\u003e\n\u003cp\u003e画像を使っていなかったので、\u003ccode\u003eamp-img\u003c/code\u003e すら使っていないです。だからこそ、楽に対応できたというのもあります。\u003cbr\u003e\nAMP時と非AMP時の表示の切り替えなどもありません。\u003c/p\u003e\n\u003ch2\u003eまとめ\u003c/h2\u003e\n\u003cp\u003eシンプルなので、簡単にできました、という感じです。\u003cbr\u003e\n画像はそのうち対応したいです。\u003c/p\u003e"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"use-amp"},"buildId":"PnElu_33CnQAyEEEfU9mg","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>