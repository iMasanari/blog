{"pageProps":{"post":{"title":"GitHub PagesのUser Pageにdistフォルダをデプロイする","description":"User Pageにはmasterブランチしか指定できないようです。そこに任意のフォルダの中身をデプロイする方法を書きました。","slug":"deploy-to-github-pages-user-page","tags":["GitHubPages"],"date":"2018-07-01T15:11:38.719Z","update":"2018-07-02T13:49:48.876Z","image":null,"draft":false},"next":{"title":"React StaticでTypeScriptを使用した時のエラー対処法","description":"static.config.jsのwebpack設定を変更することで起こるエラーの対処法。","slug":"webpacks-rules-in-static-config-js","tags":["ReactStatic","TypeScript","webpack"],"date":"2018-07-03T11:47:13.910Z","update":null,"image":null,"draft":false},"prev":{"title":"ブログで使用した技術","description":"この技術ブログで使用したライブラリやツールを紹介していきます。選定理由についても書きました。","slug":"use-technology","tags":["blog","React","preact","TypeScript","ReactStatic"],"date":"2018-06-30T14:52:29.225Z","update":"2019-04-20T13:15:27.878Z","image":null,"draft":false},"sameTags":[],"content":"<h2>User Pageにはmasterブランチしか指定できない</h2>\n<p>みたいです。\nしかもルート指定もできないようです。</p>\n<p>GitHubは今までProject Pageしか使っていなかったので、<code>gh-pages</code>ブランチを指定できず焦りました。\nというわけでググります。</p>\n<h2>どうやらmasterを殺せばいいらしい</h2>\n<p>このQiitaの記事を参考に作業していきます。</p>\n<p><a href=\"https://qiita.com/kwappa/items/03ffdeb89039a7249619\">GitHub PagesのUser Pagesでドキュメントルートを変更するにはmasterを殺す</a></p>\n<p><code>master</code>ブランチを削除して、指定フォルダをsubtreeとしてpushするらしいです。</p>\n<p>手順通りに作業し、残るはpushのみ…</p>\n<app-code-wrapper lang=\"bash\" code=\"$ git subtree push --prefix dist/ origin master\ngit push using:  origin master\nNo new revisions were found\"><pre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\"><code><span class=\"line\"><span style=\"color: #D4D4D4\">$ </span><span style=\"color: #CE9178\">git</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">subtree</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">push</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">--prefix</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">dist/</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">origin</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">master</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">git </span><span style=\"color: #CE9178\">push</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">using:</span><span style=\"color: #D4D4D4\">  </span><span style=\"color: #CE9178\">origin</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">master</span></span>\n<span class=\"line\"><span style=\"color: #D4D4D4\">No </span><span style=\"color: #CE9178\">new</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">revisions</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">were</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">found</span></span></code></pre></app-code-wrapper>\n<p>はい、うまくいかず！\n<code>master</code>ブランチは追加されませんでした。</p>\n<p><code>No new revisions were found</code>を読むと、更新ファイルが無いとのことらしいです。<code>dist</code>フォルダを<code>.gitignore</code>しているのが原因でしょう。</p>\n<h2>gh-pagesに頼る</h2>\n<p><code>dist</code>フォルダを開発のgit管理に入れたくないし、だからと言ってデプロイのたびに<code>add -f</code>していくのは面倒です。\nなので、<a href=\"https://github.com/tschaub/gh-pages\">gh-pages</a>で<code>master</code>にデプロイできるか試してみます。</p>\n<p>調べてみると、どうやらブランチを指定するオプションは<code>-b</code>(<code>--branch</code>)のようです。\n実は<code>gh-pages</code>ブランチにpushした時はこれを使ったんですけど、subtreeをpushする方法を調べた時にアンインストールしてしまっていたんですね。\n再インストールして、以下のコマンドを叩きます。</p>\n<app-code-wrapper lang=\"bash\" code=\"$ npx gh-pages -d dist -b master\"><pre class=\"shiki dark-plus\" style=\"background-color: #1E1E1E\"><code><span class=\"line\"><span style=\"color: #D4D4D4\">$ </span><span style=\"color: #CE9178\">npx</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">gh-pages</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">-d</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">dist</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">-b</span><span style=\"color: #D4D4D4\"> </span><span style=\"color: #CE9178\">master</span></span></code></pre></app-code-wrapper>\n<p>これで無事デプロイが完了しました！</p>\n<h2>まとめ</h2>\n<p>gitにはsubtreeという機能がある。\nでも<code>.gitignore</code>が優先されてしまう。\n<a href=\"https://github.com/tschaub/gh-pages\">gh-pages</a>が超便利！</p>"},"__N_SSG":true}